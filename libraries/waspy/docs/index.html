<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>wasdi API documentation</title>
    <meta name="description" content="This is WASPY, the WASDI Python lib.
The methods allow to interact with WASDI seamlessly.
Note:
the ..." />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  .codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sa { color: #BA2121 } /* Literal.String.Affix */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .dl { color: #BA2121 } /* Literal.String.Delimiter */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .fm { color: #0000FF } /* Name.Function.Magic */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .vm { color: #19177C } /* Name.Variable.Magic */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">
    <li class="set"><h3><a href="#header-variables">Module variables</a></h3>
      
  <ul>
    <li class="mono"><a href="#wasdi.m_aoParamsDictionary">m_aoParamsDictionary</a></li>
    <li class="mono"><a href="#wasdi.m_bDownloadActive">m_bDownloadActive</a></li>
    <li class="mono"><a href="#wasdi.m_bIsOnServer">m_bIsOnServer</a></li>
    <li class="mono"><a href="#wasdi.m_bUploadActive">m_bUploadActive</a></li>
    <li class="mono"><a href="#wasdi.m_bValidSession">m_bValidSession</a></li>
    <li class="mono"><a href="#wasdi.m_bVerbose">m_bVerbose</a></li>
    <li class="mono"><a href="#wasdi.m_sActiveWorkspace">m_sActiveWorkspace</a></li>
    <li class="mono"><a href="#wasdi.m_sBasePath">m_sBasePath</a></li>
    <li class="mono"><a href="#wasdi.m_sBaseUrl">m_sBaseUrl</a></li>
    <li class="mono"><a href="#wasdi.m_sMyProcId">m_sMyProcId</a></li>
    <li class="mono"><a href="#wasdi.m_sParametersFilePath">m_sParametersFilePath</a></li>
    <li class="mono"><a href="#wasdi.m_sPassword">m_sPassword</a></li>
    <li class="mono"><a href="#wasdi.m_sSessionId">m_sSessionId</a></li>
    <li class="mono"><a href="#wasdi.m_sUser">m_sUser</a></li>
    <li class="mono"><a href="#wasdi.name">name</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-functions">Functions</a></h3>
      
  <ul>
    <li class="mono"><a href="#wasdi.addFileToWASDI">addFileToWASDI</a></li>
    <li class="mono"><a href="#wasdi.addParameter">addParameter</a></li>
    <li class="mono"><a href="#wasdi.asynchAddFileToWASDI">asynchAddFileToWASDI</a></li>
    <li class="mono"><a href="#wasdi.asynchExecuteProcessor">asynchExecuteProcessor</a></li>
    <li class="mono"><a href="#wasdi.asynchExecuteWorkflow">asynchExecuteWorkflow</a></li>
    <li class="mono"><a href="#wasdi.deleteProduct">deleteProduct</a></li>
    <li class="mono"><a href="#wasdi.downloadFile">downloadFile</a></li>
    <li class="mono"><a href="#wasdi.executeProcessor">executeProcessor</a></li>
    <li class="mono"><a href="#wasdi.executeWorkflow">executeWorkflow</a></li>
    <li class="mono"><a href="#wasdi.getActiveWorkspaceId">getActiveWorkspaceId</a></li>
    <li class="mono"><a href="#wasdi.getBasePath">getBasePath</a></li>
    <li class="mono"><a href="#wasdi.getBaseUrl">getBaseUrl</a></li>
    <li class="mono"><a href="#wasdi.getDownloadActive">getDownloadActive</a></li>
    <li class="mono"><a href="#wasdi.getFoundProductName">getFoundProductName</a></li>
    <li class="mono"><a href="#wasdi.getFullProductPath">getFullProductPath</a></li>
    <li class="mono"><a href="#wasdi.getIsOnServer">getIsOnServer</a></li>
    <li class="mono"><a href="#wasdi.getParameter">getParameter</a></li>
    <li class="mono"><a href="#wasdi.getParametersDict">getParametersDict</a></li>
    <li class="mono"><a href="#wasdi.getParametersFilePath">getParametersFilePath</a></li>
    <li class="mono"><a href="#wasdi.getPassword">getPassword</a></li>
    <li class="mono"><a href="#wasdi.getProcId">getProcId</a></li>
    <li class="mono"><a href="#wasdi.getProcessStatus">getProcessStatus</a></li>
    <li class="mono"><a href="#wasdi.getProductsByActiveWorkspace">getProductsByActiveWorkspace</a></li>
    <li class="mono"><a href="#wasdi.getProductsByWorkspace">getProductsByWorkspace</a></li>
    <li class="mono"><a href="#wasdi.getProductsByWorkspaceId">getProductsByWorkspaceId</a></li>
    <li class="mono"><a href="#wasdi.getSavePath">getSavePath</a></li>
    <li class="mono"><a href="#wasdi.getSessionId">getSessionId</a></li>
    <li class="mono"><a href="#wasdi.getUploadActive">getUploadActive</a></li>
    <li class="mono"><a href="#wasdi.getUser">getUser</a></li>
    <li class="mono"><a href="#wasdi.getVerbose">getVerbose</a></li>
    <li class="mono"><a href="#wasdi.getWorkflows">getWorkflows</a></li>
    <li class="mono"><a href="#wasdi.getWorkspaceIdByName">getWorkspaceIdByName</a></li>
    <li class="mono"><a href="#wasdi.getWorkspaces">getWorkspaces</a></li>
    <li class="mono"><a href="#wasdi.hello">hello</a></li>
    <li class="mono"><a href="#wasdi.importProduct">importProduct</a></li>
    <li class="mono"><a href="#wasdi.init">init</a></li>
    <li class="mono"><a href="#wasdi.mosaic">mosaic</a></li>
    <li class="mono"><a href="#wasdi.openWorkspace">openWorkspace</a></li>
    <li class="mono"><a href="#wasdi.openWorkspaceById">openWorkspaceById</a></li>
    <li class="mono"><a href="#wasdi.printStatus">printStatus</a></li>
    <li class="mono"><a href="#wasdi.refreshParameters">refreshParameters</a></li>
    <li class="mono"><a href="#wasdi.saveFile">saveFile</a></li>
    <li class="mono"><a href="#wasdi.searchEOImages">searchEOImages</a></li>
    <li class="mono"><a href="#wasdi.setActiveWorkspaceId">setActiveWorkspaceId</a></li>
    <li class="mono"><a href="#wasdi.setBasePath">setBasePath</a></li>
    <li class="mono"><a href="#wasdi.setBaseUrl">setBaseUrl</a></li>
    <li class="mono"><a href="#wasdi.setDownloadActive">setDownloadActive</a></li>
    <li class="mono"><a href="#wasdi.setIsOnServer">setIsOnServer</a></li>
    <li class="mono"><a href="#wasdi.setParametersFilePath">setParametersFilePath</a></li>
    <li class="mono"><a href="#wasdi.setPassword">setPassword</a></li>
    <li class="mono"><a href="#wasdi.setProcId">setProcId</a></li>
    <li class="mono"><a href="#wasdi.setProcessPayload">setProcessPayload</a></li>
    <li class="mono"><a href="#wasdi.setSessionId">setSessionId</a></li>
    <li class="mono"><a href="#wasdi.setUploadActive">setUploadActive</a></li>
    <li class="mono"><a href="#wasdi.setUser">setUser</a></li>
    <li class="mono"><a href="#wasdi.setVerbose">setVerbose</a></li>
    <li class="mono"><a href="#wasdi.subset">subset</a></li>
    <li class="mono"><a href="#wasdi.updateProcessStatus">updateProcessStatus</a></li>
    <li class="mono"><a href="#wasdi.updateProgressPerc">updateProgressPerc</a></li>
    <li class="mono"><a href="#wasdi.uploadFile">uploadFile</a></li>
    <li class="mono"><a href="#wasdi.waitProcess">waitProcess</a></li>
    <li class="mono"><a href="#wasdi.wasdiLog">wasdiLog</a></li>
  </ul>

    </li>


    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">wasdi</span> module</h1>
  <p>This is WASPY, the WASDI Python lib.
The methods allow to interact with WASDI seamlessly.
Note:
the philosophy of safe programming is adopted as widely as possible, the lib will try to workaround issues such as
faulty input, and print an error rather than raise an exception, so that your program can possibly go on. Please check
the return statues</p>
<p>Created on 11 Jun 2018</p>
<p>@author: p.campanella</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi', this);">Show source &equiv;</a></p>
  <div id="source-wasdi" class="source">
    <div class="codehilite"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This is WASPY, the WASDI Python lib.</span>
<span class="sd">The methods allow to interact with WASDI seamlessly.</span>
<span class="sd">Note:</span>
<span class="sd">the philosophy of safe programming is adopted as widely as possible, the lib will try to workaround issues such as</span>
<span class="sd">faulty input, and print an error rather than raise an exception, so that your program can possibly go on. Please check</span>
<span class="sd">the return statues</span>


<span class="sd">Created on 11 Jun 2018</span>

<span class="sd">@author: p.campanella</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># from pandas._libs.join import outer_join_indexer</span>

<span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;wasdi&quot;</span>

<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">traceback</span>
<span class="kn">import</span> <span class="nn">zipfile</span>

<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">m_sUser</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">m_sPassword</span> <span class="o">=</span> <span class="bp">None</span>

<span class="n">m_sActiveWorkspace</span> <span class="o">=</span> <span class="bp">None</span>

<span class="n">m_sParametersFilePath</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">m_sSessionId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">m_sBasePath</span> <span class="o">=</span> <span class="bp">None</span>

<span class="n">m_bDownloadActive</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">m_bUploadActive</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">m_bVerbose</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">m_aoParamsDictionary</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">m_sMyProcId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">m_sBaseUrl</span> <span class="o">=</span> <span class="s1">&#39;http://www.wasdi.net/wasdiwebserver/rest&#39;</span>
<span class="n">m_bIsOnServer</span> <span class="o">=</span> <span class="bp">False</span>


<span class="k">def</span> <span class="nf">printStatus</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Prints status</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>
    <span class="k">global</span> <span class="n">m_sParametersFilePath</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">global</span> <span class="n">m_sBasePath</span>
    <span class="k">global</span> <span class="n">m_bDownloadActive</span>
    <span class="k">global</span> <span class="n">m_bUploadActive</span>
    <span class="k">global</span> <span class="n">m_bVerbose</span>
    <span class="k">global</span> <span class="n">m_aoParamsDictionary</span>
    <span class="k">global</span> <span class="n">m_sMyProcId</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_bIsOnServer</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: user: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getUser</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: password: ***********&#39;</span><span class="p">)</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: session id: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getSessionId</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: active workspace: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getActiveWorkspaceId</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: parameters file path: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getParametersFilePath</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: base path: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getBasePath</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: download active: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getDownloadActive</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: upload active: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getUploadActive</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: verbose: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getVerbose</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: param dict: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getParametersDict</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: proc id: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getProcId</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: base url: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getBaseUrl</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: is on server: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getIsOnServer</span><span class="p">()))</span>
    <span class="k">if</span> <span class="n">m_bValidSession</span><span class="p">:</span>
        <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: session is valid :-)&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.printStatus: session is not valid :-(&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">setVerbose</span><span class="p">(</span><span class="n">bVerbose</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">bVerbose</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.setVerbose: passed None, won</span><span class="se">\&#39;</span><span class="s1">t change&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bVerbose</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.setVerbose: passed non boolean, trying to convert&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bVerbose</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">bVerbose</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.setVerbose: cannot convert argument into boolean, won</span><span class="se">\&#39;</span><span class="s1">t change&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="k">global</span> <span class="n">m_bVerbose</span>
    <span class="n">m_bVerbose</span> <span class="o">=</span> <span class="n">bVerbose</span>


<span class="k">def</span> <span class="nf">getVerbose</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">m_bVerbose</span>
    <span class="k">return</span> <span class="n">m_bVerbose</span>


<span class="k">def</span> <span class="nf">getParametersDict</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the full Params Dictionary</span>
<span class="sd">    :return: a dictionary containing the parameters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_aoParamsDictionary</span>
    <span class="k">return</span> <span class="n">m_aoParamsDictionary</span>


<span class="k">def</span> <span class="nf">addParameter</span><span class="p">(</span><span class="n">sKey</span><span class="p">,</span> <span class="n">oValue</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a parameter</span>
<span class="sd">    :param sKey: parameter key</span>
<span class="sd">    :param oValue: parameter value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_aoParamsDictionary</span>
    <span class="n">m_aoParamsDictionary</span><span class="p">[</span><span class="n">sKey</span><span class="p">]</span> <span class="o">=</span> <span class="n">oValue</span>


<span class="k">def</span> <span class="nf">getParameter</span><span class="p">(</span><span class="n">sKey</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets a parameter using its key</span>
<span class="sd">    :param sKey: parameter key</span>
<span class="sd">    :return: parameter value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_aoParamsDictionary</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">m_aoParamsDictionary</span><span class="p">[</span><span class="n">sKey</span><span class="p">]</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>


<span class="k">def</span> <span class="nf">setUser</span><span class="p">(</span><span class="n">sUser</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the WASDI User</span>
<span class="sd">    :param sUser: WASDI UserID</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sUser</span>
    <span class="n">m_sUser</span> <span class="o">=</span> <span class="n">sUser</span>


<span class="k">def</span> <span class="nf">getUser</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the WASDI User</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sUser</span>
    <span class="k">return</span> <span class="n">m_sUser</span>


<span class="k">def</span> <span class="nf">setPassword</span><span class="p">(</span><span class="n">sPassword</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the WASDI Password</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sPassword</span>
    <span class="n">m_sPassword</span> <span class="o">=</span> <span class="n">sPassword</span>


<span class="k">def</span> <span class="nf">getPassword</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the WASDI Password</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sPassword</span>
    <span class="k">return</span> <span class="n">m_sPassword</span>


<span class="k">def</span> <span class="nf">setSessionId</span><span class="p">(</span><span class="n">sSessionId</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the WASDI Session</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="n">m_sSessionId</span> <span class="o">=</span> <span class="n">sSessionId</span>


<span class="k">def</span> <span class="nf">setParametersFilePath</span><span class="p">(</span><span class="n">sParamPath</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">sParamPath</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.setParametersFilePath: passed None as path, won</span><span class="se">\&#39;</span><span class="s1">t change&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sParamPath</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.setParametersFilePath: string passed has zero length, won</span><span class="se">\&#39;</span><span class="s1">t change&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">global</span> <span class="n">m_sParametersFilePath</span>
    <span class="n">m_sParametersFilePath</span> <span class="o">=</span> <span class="n">sParamPath</span>


<span class="k">def</span> <span class="nf">getParametersFilePath</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">m_sParametersFilePath</span>
    <span class="k">return</span> <span class="n">m_sParametersFilePath</span>


<span class="k">def</span> <span class="nf">getSessionId</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the WASDI Session</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">return</span> <span class="n">m_sSessionId</span>


<span class="k">def</span> <span class="nf">setBasePath</span><span class="p">(</span><span class="n">sBasePath</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the local Base Path for WASDI</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBasePath</span>
    <span class="n">m_sBasePath</span> <span class="o">=</span> <span class="n">sBasePath</span>


<span class="k">def</span> <span class="nf">getBasePath</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the local Base Path for WASDI</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBasePath</span>
    <span class="k">return</span> <span class="n">m_sBasePath</span>


<span class="k">def</span> <span class="nf">setBaseUrl</span><span class="p">(</span><span class="n">sBaseUrl</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the WASDI API URL</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="n">m_sBaseUrl</span> <span class="o">=</span> <span class="n">sBaseUrl</span>


<span class="k">def</span> <span class="nf">getBaseUrl</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the WASDI API URL</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">return</span> <span class="n">m_sBaseUrl</span>


<span class="k">def</span> <span class="nf">setIsOnServer</span><span class="p">(</span><span class="n">bIsOnServer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the Is on Server Flag: keep it false, as default, while developing</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_bIsOnServer</span>
    <span class="n">m_bIsOnServer</span> <span class="o">=</span> <span class="n">bIsOnServer</span>


<span class="k">def</span> <span class="nf">getIsOnServer</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the WASDI API URL</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_bIsOnServer</span>
    <span class="k">return</span> <span class="n">m_bIsOnServer</span>


<span class="k">def</span> <span class="nf">setDownloadActive</span><span class="p">(</span><span class="n">bDownloadActive</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    When in development, set True to download locally files from Server.</span>
<span class="sd">    Set it to false to NOT donwload data. In this case the developer must check the availability of the files</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">bDownloadActive</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.setDownloadActive: passed None, won</span><span class="se">\&#39;</span><span class="s1">t change&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">global</span> <span class="n">m_bDownloadActive</span>
    <span class="n">m_bDownloadActive</span> <span class="o">=</span> <span class="n">bDownloadActive</span>


<span class="k">def</span> <span class="nf">getDownloadActive</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the WASDI API URL</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_bDownloadActive</span>
    <span class="k">return</span> <span class="n">m_bDownloadActive</span>


<span class="k">def</span> <span class="nf">setUploadActive</span><span class="p">(</span><span class="n">bUploadActive</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    When in development, set True to upload local files on Server.</span>
<span class="sd">    Set it to false to NOT upload data. In this case the developer must check the availability of the files</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">bUploadActive</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.setUploadActive: passed None, won</span><span class="se">\&#39;</span><span class="s1">t change&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">global</span> <span class="n">m_bUploadActive</span>
    <span class="n">m_bUploadActive</span> <span class="o">=</span> <span class="n">bUploadActive</span>


<span class="k">def</span> <span class="nf">getUploadActive</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the WASDI API URL</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_bUploadActive</span>
    <span class="k">return</span> <span class="n">m_bUploadActive</span>


<span class="k">def</span> <span class="nf">setProcId</span><span class="p">(</span><span class="n">sProcID</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Own Proc Id</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sMyProcId</span>
    <span class="n">m_sMyProcId</span> <span class="o">=</span> <span class="n">sProcID</span>


<span class="k">def</span> <span class="nf">getProcId</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the Own Proc Id</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sMyProcId</span>
    <span class="k">return</span> <span class="n">m_sMyProcId</span>


<span class="k">def</span> <span class="nf">_log</span><span class="p">(</span><span class="n">sLog</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">m_bVerbose</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sLog</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_getStandardHeaders</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="n">asHeaders</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span> <span class="s1">&#39;x-session-token&#39;</span><span class="p">:</span> <span class="n">m_sSessionId</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">asHeaders</span>


<span class="k">def</span> <span class="nf">_loadConfig</span><span class="p">(</span><span class="n">sConfigFilePath</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads configuration from given file</span>
<span class="sd">    :param sConfigFilePath: a string containing a path to the configuration file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">sConfigFilePath</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._loadConfigParams: config parameter file name is None, cannot load config&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">sConfigFilePath</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._loadConfigParams: config parameter file name is empty, cannot load config&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">sConfigFilePath</span> <span class="o">=</span> <span class="n">_normPath</span><span class="p">(</span><span class="n">sConfigFilePath</span><span class="p">)</span>

    <span class="k">global</span> <span class="n">m_sUser</span>
    <span class="k">global</span> <span class="n">m_sPassword</span>
    <span class="k">global</span> <span class="n">m_sParametersFilePath</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">global</span> <span class="n">m_sBasePath</span>

    <span class="k">global</span> <span class="n">m_bDownloadActive</span>
    <span class="k">global</span> <span class="n">m_bUploadActive</span>
    <span class="k">global</span> <span class="n">m_bVerbose</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># assume it is a JSON file</span>
        <span class="n">sTempWorkspaceName</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">sTempWorkspaceID</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">sConfigFilePath</span><span class="p">)</span> <span class="k">as</span> <span class="n">oJsonFile</span><span class="p">:</span>
            <span class="n">oJson</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">oJsonFile</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;USER&quot;</span> <span class="ow">in</span> <span class="n">oJson</span><span class="p">:</span>
                <span class="n">m_sUser</span> <span class="o">=</span> <span class="n">oJson</span><span class="p">[</span><span class="s2">&quot;USER&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;PASSWORD&quot;</span> <span class="ow">in</span> <span class="n">oJson</span><span class="p">:</span>
                <span class="n">m_sPassword</span> <span class="o">=</span> <span class="n">oJson</span><span class="p">[</span><span class="s2">&quot;PASSWORD&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;WORKSPACE&quot;</span> <span class="ow">in</span> <span class="n">oJson</span><span class="p">:</span>
                <span class="n">sTempWorkspaceName</span> <span class="o">=</span> <span class="n">oJson</span><span class="p">[</span><span class="s2">&quot;WORKSPACE&quot;</span><span class="p">]</span>
                <span class="n">sTempWorkspaceID</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">elif</span> <span class="s2">&quot;WORKSPACEID&quot;</span> <span class="ow">in</span> <span class="n">oJson</span><span class="p">:</span>
                <span class="n">sTempWorkspaceID</span> <span class="o">=</span> <span class="n">oJson</span><span class="p">[</span><span class="s2">&quot;WORKSPACEID&quot;</span><span class="p">]</span>
                <span class="n">sTempWorkspaceName</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">if</span> <span class="s2">&quot;BASEPATH&quot;</span> <span class="ow">in</span> <span class="n">oJson</span><span class="p">:</span>
                <span class="n">m_sBasePath</span> <span class="o">=</span> <span class="n">oJson</span><span class="p">[</span><span class="s2">&quot;BASEPATH&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;PARAMETERSFILEPATH&quot;</span> <span class="ow">in</span> <span class="n">oJson</span><span class="p">:</span>
                <span class="n">m_sParametersFilePath</span> <span class="o">=</span> <span class="n">oJson</span><span class="p">[</span><span class="s2">&quot;PARAMETERSFILEPATH&quot;</span><span class="p">]</span>
                <span class="n">m_sParametersFilePath</span> <span class="o">=</span> <span class="n">_normPath</span><span class="p">(</span><span class="n">m_sParametersFilePath</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;DOWNLOADACTIVE&quot;</span> <span class="ow">in</span> <span class="n">oJson</span><span class="p">:</span>
                <span class="n">m_bDownloadActive</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">oJson</span><span class="p">[</span><span class="s2">&quot;DOWNLOADACTIVE&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="s2">&quot;UPLOADACTIVE&quot;</span> <span class="ow">in</span> <span class="n">oJson</span><span class="p">:</span>
                <span class="n">m_bUploadActive</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">oJson</span><span class="p">[</span><span class="s2">&quot;UPLOADACTIVE&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="s2">&quot;VERBOSE&quot;</span> <span class="ow">in</span> <span class="n">oJson</span><span class="p">:</span>
                <span class="n">m_bVerbose</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">oJson</span><span class="p">[</span><span class="s2">&quot;VERBOSE&quot;</span><span class="p">])</span>

        <span class="k">return</span> <span class="bp">True</span><span class="p">,</span> <span class="n">sTempWorkspaceName</span><span class="p">,</span> <span class="n">sTempWorkspaceID</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">oEx</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._loadConfigParams: something went wrong&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span>


<span class="k">def</span> <span class="nf">_loadParams</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads parameters from file, if specified in configuration file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sParametersFilePath</span>
    <span class="k">global</span> <span class="n">m_aoParamsDictionary</span>

    <span class="n">bParamLoaded</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">m_sParametersFilePath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">m_sParametersFilePath</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">m_sParametersFilePath</span><span class="p">)</span> <span class="k">as</span> <span class="n">oJsonFile</span><span class="p">:</span>
                <span class="n">m_aoParamsDictionary</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">oJsonFile</span><span class="p">)</span>
                <span class="n">bParamLoaded</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">except</span> <span class="n">FileNotFoundError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">bParamLoaded</span><span class="p">:</span>
        <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] wasdi could not load param file. That is fine, you can still load it later, don</span><span class="se">\&#39;</span><span class="s1">t worry&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">refreshParameters</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Refresh parameters, reading the file again</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_loadParams</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">sConfigFilePath</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Init WASDI Library. Call it after setting user, password, path and url or use it with a config file</span>
<span class="sd">    Return True if login was successful, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sUser</span>
    <span class="k">global</span> <span class="n">m_sPassword</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">global</span> <span class="n">m_sBasePath</span>
    <span class="k">global</span> <span class="n">m_bValidSession</span>

    <span class="n">sWname</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">sWId</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="n">sConfigFilePath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">bConfigOk</span><span class="p">,</span> <span class="n">sWname</span><span class="p">,</span> <span class="n">sWId</span> <span class="o">=</span> <span class="n">_loadConfig</span><span class="p">(</span><span class="n">sConfigFilePath</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bConfigOk</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">_loadParams</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">m_sUser</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.init: must initialize user first, but None given&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>

    <span class="k">if</span> <span class="n">m_sBasePath</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">m_bIsOnServer</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">m_sBasePath</span> <span class="o">=</span> <span class="s1">&#39;/data/wasdi/&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sHome</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
            <span class="c1"># the empty string at the end adds a separator</span>
            <span class="n">m_sBasePath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sHome</span><span class="p">,</span> <span class="s2">&quot;.wasdi&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">m_sSessionId</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
        <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/auth/checksession&#39;</span>
        <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">oResponse</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
            <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">sUser</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">oJsonResult</span><span class="p">[</span><span class="s1">&#39;userId&#39;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">sUser</span> <span class="o">==</span> <span class="n">m_sUser</span><span class="p">:</span>
                    <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">m_sPassword</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.init: must initialize password first, but None given&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="n">asHeaders</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">}</span>
        <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/auth/login&#39;</span>
        <span class="n">sPayload</span> <span class="o">=</span> <span class="s1">&#39;{&quot;userId&quot;:&quot;&#39;</span> <span class="o">+</span> <span class="n">m_sUser</span> <span class="o">+</span> <span class="s1">&#39;&quot;,&quot;userPassword&quot;:&quot;&#39;</span> <span class="o">+</span> <span class="n">m_sPassword</span> <span class="o">+</span> <span class="s1">&#39;&quot; }&#39;</span>
        <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">sPayload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">oResponse</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.init: cannot authenticate&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
            <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">elif</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.init: cannot authenticate, server replied: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
            <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">m_sSessionId</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">oJsonResult</span><span class="p">[</span><span class="s1">&#39;sessionId&#39;</span><span class="p">])</span>
                <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.init: returned session is: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">m_sSessionId</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">m_sSessionId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">m_sSessionId</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">m_sSessionId</span> <span class="o">!=</span> <span class="s1">&#39;None&#39;</span><span class="p">:</span>
                    <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">if</span> <span class="n">m_bValidSession</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.init: WASPY successfully initiated :-)&#39;</span><span class="p">)</span>
        <span class="n">sW</span> <span class="o">=</span> <span class="n">getActiveWorkspaceId</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">sW</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sW</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">sWname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">openWorkspace</span><span class="p">(</span><span class="n">sWname</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">sWId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">openWorkspaceById</span><span class="p">(</span><span class="n">sWId</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.init: could not init WASPY :-(&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>

    <span class="n">printStatus</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">m_bValidSession</span>


<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hello Wasdi to test the connection.</span>
<span class="sd">    :return: the hello message as Text</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/wasdi/hello&#39;</span>
    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">oResult</span><span class="o">.</span><span class="n">text</span>


<span class="k">def</span> <span class="nf">getWorkspaces</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get List of user workspaces</span>
<span class="sd">    :return: an array of WASDI Workspace JSON Objects.</span>
<span class="sd">    Each Object is like this</span>
<span class="sd">    {</span>
<span class="sd">        &quot;ownerUserId&quot;:STRING,</span>
<span class="sd">        &quot;sharedUsers&quot;:[STRING],</span>
<span class="sd">        &quot;workspaceId&quot;:STRING,</span>
<span class="sd">        &quot;workspaceName&quot;:STRING</span>
<span class="sd">    }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/ws/byuser&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">oJsonResult</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>


<span class="k">def</span> <span class="nf">getWorkspaceIdByName</span><span class="p">(</span><span class="n">sName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get Id of a Workspace from the name</span>
<span class="sd">    Return the WorkspaceId as a String, &#39;&#39; if there is any error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/ws/byuser&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">oWorkspace</span> <span class="ow">in</span> <span class="n">oJsonResult</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">oWorkspace</span><span class="p">[</span><span class="s1">&#39;workspaceName&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">sName</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">oWorkspace</span><span class="p">[</span><span class="s1">&#39;workspaceId&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">return</span> <span class="s1">&#39;&#39;</span>


<span class="k">def</span> <span class="nf">openWorkspaceById</span><span class="p">(</span><span class="n">sWorkspaceId</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Open a workspace by Id</span>
<span class="sd">    return the WorkspaceId as a String, &#39;&#39; if there is any error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>
    <span class="n">m_sActiveWorkspace</span> <span class="o">=</span> <span class="n">sWorkspaceId</span>
    <span class="k">return</span> <span class="n">m_sActiveWorkspace</span>


<span class="k">def</span> <span class="nf">setActiveWorkspaceId</span><span class="p">(</span><span class="n">sActiveWorkspace</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>
    <span class="n">m_sActiveWorkspace</span> <span class="o">=</span> <span class="n">sActiveWorkspace</span>


<span class="k">def</span> <span class="nf">getActiveWorkspaceId</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get Active workspace Id</span>
<span class="sd">    return the WorkspaceId as a String, &#39;&#39; if there is any error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>
    <span class="k">return</span> <span class="n">m_sActiveWorkspace</span>


<span class="k">def</span> <span class="nf">openWorkspace</span><span class="p">(</span><span class="n">sWorkspaceName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Open a workspace</span>
<span class="sd">    return the WorkspaceId as a String, &#39;&#39; if there is any error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>
    <span class="n">m_sActiveWorkspace</span> <span class="o">=</span> <span class="n">getWorkspaceIdByName</span><span class="p">(</span><span class="n">sWorkspaceName</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">m_sActiveWorkspace</span>


<span class="k">def</span> <span class="nf">getProductsByWorkspace</span><span class="p">(</span><span class="n">sWorkspaceName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the list of products in a workspace</span>
<span class="sd">    the list is an array of string. Can be empty if there is any error</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">sWorkspaceId</span> <span class="o">=</span> <span class="n">getWorkspaceIdByName</span><span class="p">(</span><span class="n">sWorkspaceName</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">getProductsByWorkspaceId</span><span class="p">(</span><span class="n">sWorkspaceId</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">getProductsByWorkspaceId</span><span class="p">(</span><span class="n">sWorkspaceId</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the list of products in a workspace (by Id)</span>
<span class="sd">    the list is an array of string. Can be empty if there is any error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>

    <span class="n">m_sActiveWorkspace</span> <span class="o">=</span> <span class="n">sWorkspaceId</span>
    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sWorkspaceId&#39;</span><span class="p">:</span> <span class="n">sWorkspaceId</span><span class="p">}</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/product/byws&#39;</span>

    <span class="n">asProducts</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">oJsonResults</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">oProduct</span> <span class="ow">in</span> <span class="n">oJsonResults</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">asProducts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">oProduct</span><span class="p">[</span><span class="s1">&#39;fileName&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">continue</span>

    <span class="k">return</span> <span class="n">asProducts</span>


<span class="k">def</span> <span class="nf">getProductsByActiveWorkspace</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the list of products in a workspace</span>
<span class="sd">    the list is an array of string. Can be empty if there is any error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>

    <span class="k">return</span> <span class="n">getProductsByWorkspaceId</span><span class="p">(</span><span class="n">m_sActiveWorkspace</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">getFullProductPath</span><span class="p">(</span><span class="n">sProductName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the full local path of a product given the product name.</span>
<span class="sd">    Use the output of this API to open the file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBasePath</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>
    <span class="k">global</span> <span class="n">m_sUser</span>
    <span class="k">global</span> <span class="n">m_bIsOnServer</span>
    <span class="k">global</span> <span class="n">m_bDownloadActive</span>

    <span class="k">if</span> <span class="n">m_bIsOnServer</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">sFullPath</span> <span class="o">=</span> <span class="s1">&#39;/data/wasdi/&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sFullPath</span> <span class="o">=</span> <span class="n">m_sBasePath</span>

    <span class="n">sFullPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sFullPath</span><span class="p">,</span> <span class="n">m_sUser</span><span class="p">,</span> <span class="n">m_sActiveWorkspace</span><span class="p">,</span> <span class="n">sProductName</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">m_bIsOnServer</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">m_bDownloadActive</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">sFullPath</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
                <span class="c1"># Download The File from WASDI</span>
                <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.getFullProductPath: LOCAL WASDI FILE MISSING: START DOWNLOAD... PLEASE WAIT&#39;</span><span class="p">)</span>
                <span class="n">downloadFile</span><span class="p">(</span><span class="n">sProductName</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">sFullPath</span>


<span class="k">def</span> <span class="nf">getSavePath</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the local base save path for a product. To save use this path + fileName. Path already include &#39;/&#39; as last char</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBasePath</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>
    <span class="k">global</span> <span class="n">m_sUser</span>

    <span class="k">if</span> <span class="n">m_bIsOnServer</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">sFullPath</span> <span class="o">=</span> <span class="s1">&#39;/data/wasdi/&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sFullPath</span> <span class="o">=</span> <span class="n">m_sBasePath</span>

    <span class="c1"># empty string at the ends adds a final separator</span>
    <span class="n">sFullPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sFullPath</span><span class="p">,</span> <span class="n">m_sUser</span><span class="p">,</span> <span class="n">m_sActiveWorkspace</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">sFullPath</span>


<span class="k">def</span> <span class="nf">getWorkflows</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the list of workflows for the user</span>
<span class="sd">        Return None if there is any error</span>
<span class="sd">        Return an array of WASDI Workspace JSON Objects if everything is ok, None otherwise. The format is as follows:</span>

<span class="sd">        {</span>
<span class="sd">            &quot;description&quot;:STRING,</span>
<span class="sd">            &quot;name&quot;: STRING,</span>
<span class="sd">            &quot;workflowId&quot;: STRING</span>
<span class="sd">        }</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/processing/getgraphsbyusr&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResults</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">oJsonResults</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>


<span class="k">def</span> <span class="nf">getProcessStatus</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the status of a Process</span>
<span class="sd">    return the status or &#39;&#39; if there was any error</span>

<span class="sd">    STATUS are  CREATED,  RUNNING,  STOPPED,  DONE,  ERROR</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sProcessId&#39;</span><span class="p">:</span> <span class="n">sProcessId</span><span class="p">}</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/process/byid&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="n">sStatus</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">sStatus</span> <span class="o">=</span> <span class="n">oJsonResult</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">sStatus</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">return</span> <span class="n">sStatus</span>


<span class="k">def</span> <span class="nf">updateProcessStatus</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">,</span> <span class="n">sStatus</span><span class="p">,</span> <span class="n">iPerc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the status of a process</span>
<span class="sd">    return the updated status as a String or &#39;&#39; if there was any problem</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">sProcessId</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProcessStatus: cannot update status, process ID is None&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">sStatus</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProcessStatus: cannot update status, status is None&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">iPerc</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProcessStatus: percentage is None&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="n">iPerc</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProcessStatus: iPerc &lt; 0 not valid&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="n">iPerc</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProcessStatus: iPerc &gt; 100 not valid&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="n">sStatus</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;CREATED&#39;</span><span class="p">,</span> <span class="s1">&#39;RUNNING&#39;</span><span class="p">,</span> <span class="s1">&#39;STOPPED&#39;</span><span class="p">,</span> <span class="s1">&#39;DONE&#39;</span><span class="p">,</span> <span class="s1">&#39;ERROR&#39;</span><span class="p">}:</span>
        <span class="k">print</span><span class="p">(</span>
            <span class="s1">&#39;[ERROR] waspy.updateProcessStatus: sStatus must be a string in: &#39;</span> <span class="o">+</span>
            <span class="s1">&#39;{CREATED,  RUNNING,  STOPPED,  DONE,  ERROR&#39;</span> <span class="o">+</span>
            <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="n">sProcessId</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sProcessId&#39;</span><span class="p">:</span> <span class="n">sProcessId</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="n">sStatus</span><span class="p">,</span> <span class="s1">&#39;perc&#39;</span><span class="p">:</span> <span class="n">iPerc</span><span class="p">}</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/process/updatebyid&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="n">sStatus</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sStatus</span> <span class="o">=</span> <span class="n">oJsonResult</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">sStatus</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">return</span> <span class="n">sStatus</span>


<span class="k">def</span> <span class="nf">updateProgressPerc</span><span class="p">(</span><span class="n">iPerc</span><span class="p">):</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.updateProgressPerc( &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">iPerc</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">iPerc</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProgressPerc: Passed None, expected a percentage&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">getProcId</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">getProcId</span><span class="p">())</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProgressPerc: Cannot update progress: process ID is not known&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="mi">0</span> <span class="o">&gt;</span> <span class="n">iPerc</span> <span class="ow">or</span> <span class="mi">100</span> <span class="o">&lt;</span> <span class="n">iPerc</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[WARNING] waspy.updateProgressPerc: passed&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">iPerc</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, automatically resetting in [0, 100]&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">iPerc</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">iPerc</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">iPerc</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="n">iPerc</span> <span class="o">=</span> <span class="mi">100</span>

    <span class="n">sStatus</span> <span class="o">=</span> <span class="s2">&quot;RUNNING&quot;</span>
    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">getBaseUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/process/updatebyid?sProcessId=&quot;</span> <span class="o">+</span> <span class="n">getProcId</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;&amp;status=&quot;</span> <span class="o">+</span> <span class="n">sStatus</span> <span class="o">+</span> <span class="s2">&quot;&amp;perc=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
        <span class="n">iPerc</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&amp;sendrabbit=1&quot;</span>
    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
    <span class="n">sResult</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">oResponse</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJson</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">oJson</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;status&quot;</span> <span class="ow">in</span> <span class="n">oJson</span><span class="p">):</span>
            <span class="n">sResult</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">oJson</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProgressPerc: could not update progress&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sResult</span>


<span class="k">def</span> <span class="nf">setProcessPayload</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the status of a process</span>
<span class="sd">    return the updated status as a String or &#39;&#39; if there was any problem</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sProcessId&#39;</span><span class="p">:</span> <span class="n">sProcessId</span><span class="p">,</span> <span class="s1">&#39;payload&#39;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)}</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/process/setpayload&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="n">sStatus</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sStatus</span> <span class="o">=</span> <span class="n">oJsonResult</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">sStatus</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">return</span> <span class="n">sStatus</span>


<span class="k">def</span> <span class="nf">saveFile</span><span class="p">(</span><span class="n">sFileName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ingest a new file in the Active WASDI Workspace.</span>
<span class="sd">    The method takes a file saved in the workspace root (see getSaveFilePath) not already added to the WS</span>
<span class="sd">    To work be sure that the file is on the server</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="n">sFileName</span><span class="p">,</span> <span class="s1">&#39;workspace&#39;</span><span class="p">:</span> <span class="n">m_sActiveWorkspace</span><span class="p">}</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/catalog/upload/ingestinws&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="n">sProcessId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">oJsonResult</span><span class="p">[</span><span class="s1">&#39;boolValue&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
                <span class="n">sProcessId</span> <span class="o">=</span> <span class="n">oJsonResult</span><span class="p">[</span><span class="s1">&#39;stringValue&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">sProcessId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">return</span> <span class="n">sProcessId</span>


<span class="k">def</span> <span class="nf">downloadFile</span><span class="p">(</span><span class="n">sFileName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ingest a new file in the Active WASDI Workspace.</span>
<span class="sd">    The method takes a file saved in the workspace root (see getSaveFilePath) not already added to the WS</span>
<span class="sd">    To work be sure that the file is on the server</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.downloadFile( &#39;</span> <span class="o">+</span> <span class="n">sFileName</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span><span class="p">)</span>

    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;filename&#39;</span><span class="p">:</span> <span class="n">sFileName</span><span class="p">}</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s1">&#39;/catalog/downloadbyname?&#39;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s1">&#39;filename=&#39;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">sFileName</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;&amp;workspace=&quot;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">getActiveWorkspaceId</span><span class="p">()</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.downloadfile: send request to configured url &#39;</span> <span class="o">+</span> <span class="n">sUrl</span><span class="p">)</span>

    <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResponse</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">):</span>
        <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.downloadFile: got ok result, downloading&#39;</span><span class="p">)</span>
        <span class="n">sAttachmentName</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">asResponseHeaders</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">headers</span>
        <span class="k">if</span> <span class="n">asResponseHeaders</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;Content-Disposition&#39;</span> <span class="ow">in</span> <span class="n">asResponseHeaders</span><span class="p">:</span>
                <span class="n">sContentDisposition</span> <span class="o">=</span> <span class="n">asResponseHeaders</span><span class="p">[</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">]</span>
                <span class="n">sAttachmentName</span> <span class="o">=</span> <span class="n">sContentDisposition</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;filename=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">while</span> <span class="n">bLoop</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;.&#39;</span><span class="p">:</span>
                        <span class="n">sAttachmentName</span> <span class="o">=</span> <span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">):</span>
                        <span class="n">sAttachmentName</span> <span class="o">=</span> <span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">):</span>
                        <span class="n">sAttachmentName</span> <span class="o">=</span> <span class="n">sAttachmentName</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\&quot;</span><span class="s1">&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">):</span>
                        <span class="n">sAttachmentName</span> <span class="o">=</span> <span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\&quot;</span><span class="s1">&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">):</span>
                        <span class="n">sAttachmentName</span> <span class="o">=</span> <span class="n">sAttachmentName</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">sSavePath</span> <span class="o">=</span> <span class="n">getSavePath</span><span class="p">()</span>
        <span class="n">sSavePath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sSavePath</span><span class="p">,</span> <span class="n">sAttachmentName</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">sSavePath</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>  <span class="c1"># Guard against race condition</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.downloadFile: cannot create File Path, aborting&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.downloadFile: downloading local file &#39;</span> <span class="o">+</span> <span class="n">sSavePath</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">sSavePath</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">oFile</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">oChunk</span> <span class="ow">in</span> <span class="n">oResponse</span><span class="p">:</span>
                <span class="c1"># _log(&#39;.&#39;)</span>
                <span class="n">oFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">oChunk</span><span class="p">)</span>
        <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.downloadFile: download done, new file locally available &#39;</span> <span class="o">+</span> <span class="n">sSavePath</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">sAttachmentName</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> \
                <span class="p">(</span><span class="n">sAttachmentName</span> <span class="o">!=</span> <span class="n">sFileName</span><span class="p">)</span> <span class="ow">and</span> \
                <span class="n">sAttachmentName</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.zip&#39;</span><span class="p">):</span>
            <span class="n">sPath</span> <span class="o">=</span> <span class="n">getSavePath</span><span class="p">()</span>
            <span class="n">_unzip</span><span class="p">(</span><span class="n">sAttachmentName</span><span class="p">,</span> <span class="n">sPath</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.downloadFile: download error, server code: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>

    <span class="k">return</span>


<span class="k">def</span> <span class="nf">wasdiLog</span><span class="p">(</span><span class="n">sLogRow</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>

    <span class="k">if</span> <span class="n">m_bIsOnServer</span><span class="p">:</span>
        <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
        <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/processors/logs/add?processworkspace=&#39;</span> <span class="o">+</span> <span class="n">m_sMyProcId</span>
        <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">sLogRow</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">oResult</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[WARNING] waspy.wasdiLog: could not log&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[WARNING] waspy.wasdiLog: could not log, server returned: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">status_code</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_log</span><span class="p">(</span><span class="n">sLogRow</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">deleteProduct</span><span class="p">(</span><span class="n">sProduct</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>

    <span class="k">if</span> <span class="n">sProduct</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.deleteProduct: product passed is None&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span>
    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;/product/delete?sProductName=&quot;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">sProduct</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;&amp;bDeleteFile=true&amp;sWorkspaceId=&quot;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">m_sActiveWorkspace</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;&amp;bDeleteLayer=true&quot;</span>
    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">oResult</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.deleteProduct: deletion failed&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">elif</span> <span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.deleteProduct: deletion failed, server returned: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">oResult</span><span class="o">.</span><span class="n">ok</span>


<span class="k">def</span> <span class="nf">searchEOImages</span><span class="p">(</span><span class="n">sPlatform</span><span class="p">,</span> <span class="n">sDateFrom</span><span class="p">,</span> <span class="n">sDateTo</span><span class="p">,</span>
                   <span class="n">fULLat</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fULLon</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fLRLat</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fLRLon</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                   <span class="n">sProductType</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">iOrbitNumber</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                   <span class="n">sSensorOperationalMode</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">sCloudCoverage</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Search EO images</span>

<span class="sd">    :param sPlatform: satellite platform (S1 or S2)</span>
<span class="sd">    :param sDateFrom: inital date YYYY-MM-DD</span>
<span class="sd">    :param sDateTo: final date YYYY-MM-DD</span>
<span class="sd">    :param fULLat: Latitude of Upper-Left corner</span>
<span class="sd">    :param fULLon: Longitude of Upper-Left corner</span>
<span class="sd">    :param fLRLat: Latitude of Lower-Right corner</span>
<span class="sd">    :param fLRLon: Longitude of Lower-Right corner</span>
<span class="sd">    :param sProductType: type of EO product</span>
<span class="sd">    :param iOrbitNumber: orbit number</span>
<span class="sd">    :param sSensorOperationalMode: sensor operational mode</span>
<span class="sd">    :param sCloudCoverage: interval of allowed cloud coverage, e.g. &quot;[0 TO 22.5]&quot;</span>
<span class="sd">    :return: a list of results</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">aoReturnList</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">sPlatform</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.searchEOImages: platform cannot be None&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="c1"># todo support other platforms</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">sPlatform</span> <span class="o">!=</span> <span class="s2">&quot;S1&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">sPlatform</span> <span class="o">!=</span> <span class="s2">&quot;S2&quot;</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.searchEOImages: platform must be S1 or S2. Received [&#39;</span> <span class="o">+</span> <span class="n">sPlatform</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="k">if</span> <span class="n">sPlatform</span> <span class="o">==</span> <span class="s2">&quot;S1&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">sProductType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">sProductType</span> <span class="o">==</span> <span class="s2">&quot;SLC&quot;</span> <span class="ow">or</span> <span class="n">sProductType</span> <span class="o">==</span> <span class="s2">&quot;GRD&quot;</span> <span class="ow">or</span> <span class="n">sProductType</span> <span class="o">==</span> <span class="s2">&quot;OCN&quot;</span><span class="p">):</span>
                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;[ERROR] waspy.searchEOImages: Available Product Types for S1; SLC, GRD, OCN. Received [&quot;</span> <span class="o">+</span>
                      <span class="n">sProductType</span> <span class="o">+</span>
                      <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="k">if</span> <span class="n">sPlatform</span> <span class="o">==</span> <span class="s2">&quot;S2&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">sProductType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">sProductType</span> <span class="o">==</span> <span class="s2">&quot;S2MSI1C&quot;</span> <span class="ow">or</span> <span class="n">sProductType</span> <span class="o">==</span> <span class="s2">&quot;S2MSI2Ap&quot;</span> <span class="ow">or</span> <span class="n">sProductType</span> <span class="o">==</span> <span class="s2">&quot;S2MSI2A&quot;</span><span class="p">):</span>
                <span class="k">print</span><span class="p">(</span>
                    <span class="s2">&quot;[ERROR] waspy.searchEOImages: Available Product Types for S2; S2MSI1C, S2MSI2Ap, S2MSI2A. Received [&quot;</span>
                    <span class="o">+</span> <span class="n">sProductType</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span> <span class="o">+</span>
                    <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="k">if</span> <span class="n">sDateFrom</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;[ERROR] waspy.searchEOImages: sDateFrom cannot be None&quot;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="c1"># if (len(sDateFrom) &lt; 10) or (sDateFrom[4] != &#39;-&#39;) or (sDateFrom[7] != &#39;-&#39;):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d\d\d\d\-\d\d\-\d\d&quot;</span><span class="p">,</span> <span class="n">sDateFrom</span><span class="p">)):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;[ERROR] waspy.searchEOImages: sDateFrom must be in format YYYY-MM-DD&quot;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="k">if</span> <span class="n">sDateTo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;[ERROR] waspy.searchEOImages: sDateTo cannot be None&quot;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="c1"># if len(sDateTo) &lt; 10 or sDateTo[4] != &#39;-&#39; or sDateTo[7] != &#39;-&#39;:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d\d\d\d\-\d\d\-\d\d&quot;</span><span class="p">,</span> <span class="n">sDateTo</span><span class="p">)):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;[ERROR] waspy.searchEOImages: sDateTo must be in format YYYY-MM-DD&quot;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="c1"># create query string:</span>

    <span class="c1"># platform name</span>
    <span class="n">sQuery</span> <span class="o">=</span> <span class="s2">&quot;( platformname:&quot;</span>
    <span class="k">if</span> <span class="n">sPlatform</span> <span class="o">==</span> <span class="s2">&quot;S2&quot;</span><span class="p">:</span>
        <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot;Sentinel-2 &quot;</span>
    <span class="k">elif</span> <span class="n">sPlatform</span> <span class="o">==</span> <span class="s2">&quot;S1&quot;</span><span class="p">:</span>
        <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot;Sentinel-1&quot;</span>

    <span class="c1"># If available add product type</span>
    <span class="k">if</span> <span class="n">sProductType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot; AND producttype:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sProductType</span><span class="p">)</span>

    <span class="c1"># If available Sensor Operational Mode</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">sSensorOperationalMode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">sPlatform</span> <span class="o">==</span> <span class="s2">&quot;S1&quot;</span><span class="p">):</span>
        <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot; AND sensoroperationalmode:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sSensorOperationalMode</span><span class="p">)</span>

    <span class="c1"># If available cloud coverage</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">sCloudCoverage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">sCloudCoverage</span> <span class="o">==</span> <span class="s2">&quot;S2&quot;</span><span class="p">):</span>
        <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot; AND cloudcoverpercentage:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sCloudCoverage</span><span class="p">)</span>

    <span class="c1"># If available add orbit number</span>
    <span class="k">if</span> <span class="n">iOrbitNumber</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iOrbitNumber</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot; AND relativeorbitnumber:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">iOrbitNumber</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[WARNING] waspy.searchEOImages: iOrbitNumber is&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">iOrbitNumber</span><span class="p">),</span>
                  <span class="s1">&#39;, but it should be an integer&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">iTmp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">iOrbitNumber</span><span class="p">)</span>
                <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[WARNING] waspy.searchEOImages: iOrbitNumber converted to: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">iTmp</span><span class="p">))</span>
                <span class="n">sQuery</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">iTmp</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[WARNING] waspy.searchEOImages: could not convert iOrbitNumber to an int, ignoring it&#39;</span> <span class="o">+</span>
                      <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>

            <span class="c1"># Close the first block</span>
    <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot;) &quot;</span>

    <span class="c1"># Date Block</span>
    <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot;AND ( beginPosition:[&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sDateFrom</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;T00:00:00.000Z TO &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sDateTo</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;T23:59:59.999Z]&quot;</span>
    <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot;AND ( endPosition:[&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sDateFrom</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;T00:00:00.000Z TO &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sDateTo</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;T23:59:59.999Z]&quot;</span>

    <span class="c1"># Close the second block</span>
    <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot;) &quot;</span>

    <span class="c1"># footprint polygon</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fULLat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fULLon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fLRLat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fLRLon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">):</span>
        <span class="n">sFootPrint</span> <span class="o">=</span> <span class="s2">&quot;( footprint:</span><span class="se">\&quot;</span><span class="s2">intersects(POLYGON(( &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fULLon</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fLRLat</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> \
                     <span class="nb">str</span><span class="p">(</span><span class="n">fULLon</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fULLat</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fLRLon</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fULLat</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fLRLon</span><span class="p">)</span> <span class="o">+</span> \
                     <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fLRLat</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fULLon</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fLRLat</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)))</span><span class="se">\&quot;</span><span class="s2">) AND &quot;</span>
    <span class="n">sQuery</span> <span class="o">=</span> <span class="n">sFootPrint</span> <span class="o">+</span> <span class="n">sQuery</span>

    <span class="n">sQueryBody</span> <span class="o">=</span> <span class="s2">&quot;[</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">sQuery</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\\&quot;</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">]&quot;</span>
    <span class="n">sQuery</span> <span class="o">=</span> <span class="s2">&quot;sQuery=&quot;</span> <span class="o">+</span> <span class="n">sQuery</span> <span class="o">+</span> <span class="s2">&quot;&amp;offset=0&amp;limit=10&amp;providers=ONDA&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">sUrl</span> <span class="o">=</span> <span class="n">getBaseUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/search/querylist?&quot;</span> <span class="o">+</span> <span class="n">sQuery</span>
        <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
        <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">sQueryBody</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># populate list from response</span>
            <span class="n">oJsonResponse</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="n">aoReturnList</span> <span class="o">=</span> <span class="n">oJsonResponse</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">oEx</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.searchEOImages: exception while trying to convert response into JSON object&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">aoReturnList</span>

        <span class="n">_log</span><span class="p">(</span><span class="s2">&quot;[INFO] waspy.searchEOImages: search results:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">aoReturnList</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">aoReturnList</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">oEx</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.searchEOImages: an error occured&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="n">_log</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">oEx</span><span class="p">))</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="n">_log</span><span class="p">(</span><span class="n">oEx</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">aoReturnList</span>


<span class="k">def</span> <span class="nf">getFoundProductName</span><span class="p">(</span><span class="n">aoProduct</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">aoProduct</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.getFoundProductName: product is None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="s2">&quot;title&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">aoProduct</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.getFoundProductName: title not found in product, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">aoProduct</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">_fileExistsOnWasdi</span><span class="p">(</span><span class="n">sFileName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    checks hwther a file already exists on WASDI or not</span>
<span class="sd">    :param sFileName: file name. Warning: must be the complete path</span>
<span class="sd">    :return: True if the file exists, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">sFileName</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._fileExistsOnWasdi: file name must not be None&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sFileName</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._fileExistsOnWasdi: File name too short&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>

    <span class="n">sBaseUrl</span> <span class="o">=</span> <span class="n">getBaseUrl</span><span class="p">()</span>
    <span class="n">sSessionId</span> <span class="o">=</span> <span class="n">getSessionId</span><span class="p">()</span>
    <span class="n">sActiveWorkspace</span> <span class="o">=</span> <span class="n">getActiveWorkspaceId</span><span class="p">()</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;/catalog/checkdownloadavaialibitybyname?token=&quot;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">sSessionId</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;&amp;filename=&quot;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">sFileName</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;&amp;workspace=&quot;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">sActiveWorkspace</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">oResult</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._fileExistsOnWasdi: failed contacting the server&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">elif</span> <span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._fileExistsOnWasdi: failed, server returned: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">oResult</span><span class="o">.</span><span class="n">ok</span>


<span class="k">def</span> <span class="nf">_unzip</span><span class="p">(</span><span class="n">sAttachmentName</span><span class="p">,</span> <span class="n">sPath</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Unzips a file</span>
<span class="sd">    :param sAttachmentName: filename to unzip</span>
<span class="sd">    :param sPath: both the path where the file is and where it must be unzipped</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy._unzip( &#39;</span> <span class="o">+</span> <span class="n">sAttachmentName</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="n">sPath</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sPath</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._unzip: path is None&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">sAttachmentName</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._unzip: attachment to unzip is None&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">sZipFilePath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sPath</span><span class="p">,</span> <span class="n">sAttachmentName</span><span class="p">)</span>
        <span class="n">zip_ref</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">sZipFilePath</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">zip_ref</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">sPath</span><span class="p">)</span>
        <span class="n">zip_ref</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._unzip: failed unzipping&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>

    <span class="k">return</span>


<span class="c1"># todo split into 2 functions</span>
<span class="k">def</span> <span class="nf">importProduct</span><span class="p">(</span><span class="n">sFileUrl</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">sBoundingBox</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">asProduct</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Imports a product from a Provider in WASDI</span>
<span class="sd">    :param sFileUrl:</span>
<span class="sd">    :param sBoundingBox:</span>
<span class="sd">    :return: execution status</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.importProduct( &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sFileUrl</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sBoundingBox</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">asProduct</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span><span class="p">)</span>

    <span class="n">sReturn</span> <span class="o">=</span> <span class="s2">&quot;ERROR&quot;</span>

    <span class="k">if</span> <span class="n">sFileUrl</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">asProduct</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="s2">&quot;link&quot;</span> <span class="ow">in</span> <span class="n">asProduct</span><span class="p">:</span>
        <span class="n">sFileUrl</span> <span class="o">=</span> <span class="n">asProduct</span><span class="p">[</span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;footprint&quot;</span> <span class="ow">in</span> <span class="n">asProduct</span><span class="p">:</span>
            <span class="n">sBoundingBox</span> <span class="o">=</span> <span class="n">asProduct</span><span class="p">[</span><span class="s2">&quot;footprint&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">sFileUrl</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.importProduct: cannot find a link to download the requested product&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sReturn</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">getBaseUrl</span><span class="p">()</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;/filebuffer/download?sFileUrl=&quot;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">sFileUrl</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;&amp;sProvider=ONDA&amp;sWorkspaceId=&quot;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">getActiveWorkspaceId</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">sBoundingBox</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;&amp;sBoundingBox=&quot;</span>
        <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">sBoundingBox</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>

    <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">oResponse</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.importProduct: cannot import product&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.importProduct: cannot import product, server returned: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">oJsonResponse</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;boolValue&quot;</span> <span class="ow">in</span> <span class="n">oJsonResponse</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oJsonResponse</span><span class="p">[</span><span class="s2">&quot;boolValue&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">&quot;stringValue&quot;</span> <span class="ow">in</span> <span class="n">oJsonResponse</span><span class="p">:</span>
                <span class="n">sProcessId</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">oJsonResponse</span><span class="p">[</span><span class="s2">&quot;stringValue&quot;</span><span class="p">])</span>
                <span class="n">sReturn</span> <span class="o">=</span> <span class="n">waitProcess</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">sReturn</span>


<span class="k">def</span> <span class="nf">asynchExecuteProcessor</span><span class="p">(</span><span class="n">sProcessorName</span><span class="p">,</span> <span class="n">aoParams</span><span class="o">=</span><span class="p">{}):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Execute a WASDI processor asynchronously</span>
<span class="sd">    :param sProcessorName: WASDI processor name</span>
<span class="sd">    :param aoParams: a dictionary of parameters for the processor</span>
<span class="sd">    :return: processor ID</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.asynchExecuteProcessor( &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sProcessorName</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">aoParams</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">sProcessorName</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.asynchExecuteProcessor: processor name is None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">sProcessorName</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.asynchExecuteProcessor: processor name empty, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">aoParams</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.asynchExecuteProcessor: parameters must be a dictionary but it is not, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">getBaseUrl</span><span class="p">()</span> <span class="o">+</span> \
           <span class="s2">&quot;/processors/run?workspace=&quot;</span> <span class="o">+</span> <span class="n">getActiveWorkspaceId</span><span class="p">()</span> <span class="o">+</span> \
           <span class="s2">&quot;&amp;name=&quot;</span> <span class="o">+</span> <span class="n">sProcessorName</span> <span class="o">+</span> \
           <span class="s2">&quot;&amp;encodedJson=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">aoParams</span><span class="p">)</span>
    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">aoParams</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">oResponse</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.asynchExecuteProcessor: something broke when contacting the server, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.asynchExecuteProcessor: API call OK&#39;</span><span class="p">)</span>
        <span class="n">aoJson</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;processingIdentifier&quot;</span> <span class="ow">in</span> <span class="n">aoJson</span><span class="p">:</span>
            <span class="n">sProcessID</span> <span class="o">=</span> <span class="n">aoJson</span><span class="p">[</span><span class="s1">&#39;processingIdentifier&#39;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">sProcessID</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.asynchExecuteProcessor: cannot extract processing identifier from response, aborting&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.asynchExecuteProcessor: server returned status &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;&#39;</span>


<span class="k">def</span> <span class="nf">executeProcessor</span><span class="p">(</span><span class="n">sProcessorName</span><span class="p">,</span> <span class="n">aoProcessParams</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes a WASDI Processor</span>
<span class="sd">    return the Process Id if every thing is ok</span>
<span class="sd">    return &#39;&#39; if there was any problem</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>

    <span class="n">sEncodedParams</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">aoProcessParams</span><span class="p">)</span>
    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;workspace&#39;</span><span class="p">:</span> <span class="n">m_sActiveWorkspace</span><span class="p">,</span>
               <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">sProcessorName</span><span class="p">,</span>
               <span class="s1">&#39;sProcessorName&#39;</span><span class="p">:</span> <span class="n">sEncodedParams</span><span class="p">}</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/processors/run&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="n">sProcessId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResults</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">sProcessId</span> <span class="o">=</span> <span class="n">oJsonResults</span><span class="p">[</span><span class="s1">&#39;processingIdentifier&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">sProcessId</span>

    <span class="k">return</span> <span class="n">sProcessId</span>


<span class="c1"># todo extend to a list of processes</span>
<span class="k">def</span> <span class="nf">waitProcess</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">sProcessId</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.waitProcess: Passed None, expected a process ID&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;ERROR&quot;</span>

    <span class="k">if</span> <span class="n">sProcessId</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.waitProcess: Passed empty, expected a process ID&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;ERROR&quot;</span>

    <span class="n">sStatus</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">while</span> <span class="n">sStatus</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;DONE&quot;</span><span class="p">,</span> <span class="s2">&quot;STOPPED&quot;</span><span class="p">,</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">}:</span>
        <span class="n">sStatus</span> <span class="o">=</span> <span class="n">getProcessStatus</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">sStatus</span>


<span class="k">def</span> <span class="nf">uploadFile</span><span class="p">(</span><span class="n">sFileName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Uploads a file to WASDI</span>
<span class="sd">    :param sFileName: name of file inside working directory OR path to file RELATIVE to working directory</span>
<span class="sd">    :return: True if succeded, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.upload( &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sFileName</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">sFileName</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.upload: the given file name is None, cannot upload&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="n">sFileName</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">):</span>
        <span class="n">sFileName</span> <span class="o">=</span> <span class="n">sFileName</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">if</span> <span class="n">sFileName</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">sFileName</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">):</span>
        <span class="n">sFileName</span> <span class="o">=</span> <span class="n">sFileName</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

    <span class="n">sFileName</span> <span class="o">=</span> <span class="n">_normPath</span><span class="p">(</span><span class="n">sFileName</span><span class="p">)</span>

    <span class="n">bResult</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="n">sBasePath</span> <span class="o">=</span> <span class="n">getBasePath</span><span class="p">()</span>
    <span class="n">sFullPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sBasePath</span><span class="p">,</span> <span class="n">sFileName</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">bResult</span>


<span class="k">def</span> <span class="nf">_normPath</span><span class="p">(</span><span class="n">sPath</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Normalizes path by adjusting separator</span>
<span class="sd">    :param sPath: a path to be normalized</span>
<span class="sd">    :return: the normalized path</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">sPath</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._normPath: passed path is None&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">None</span>

    <span class="n">sPath</span> <span class="o">=</span> <span class="n">sPath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span>
    <span class="n">sPath</span> <span class="o">=</span> <span class="n">sPath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">sPath</span>


<span class="k">def</span> <span class="nf">addFileToWASDI</span><span class="p">(</span><span class="n">sFileName</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_internalAddFileToWASDI</span><span class="p">(</span><span class="n">sFileName</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">asynchAddFileToWASDI</span><span class="p">(</span><span class="n">sFileName</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_internalAddFileToWASDI</span><span class="p">(</span><span class="n">sFileName</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_internalAddFileToWASDI</span><span class="p">(</span><span class="n">sFileName</span><span class="p">,</span> <span class="n">bAsynch</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy._internalAddFileToWASDI( &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sFileName</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">bAsynch</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">sFileName</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalAddFileToWASDI: file name is None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sFileName</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[WARNING] waspy._internalAddFileToWASDI: file name is not a string, trying conversion&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sFileName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">sFileName</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalAddFileToWASDI: cannot convert file name into string, aborting&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sFileName</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalAddFileToWASDI: file name has zero length, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="n">bAsynch</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[WARNING] waspy._internalAddFileToWASDI: asynch flag is None, assuming False&#39;</span><span class="p">)</span>
        <span class="n">bAsynch</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bAsynch</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[WARNING] waspy._internalAddFileToWASDI: asynch flag is not a boolean, trying casting&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bAsynch</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">bAsynch</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalAddFileToWASDI: could not convert asynch flag into bool, aborting&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="n">sResult</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">getUploadActive</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">sFilePath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">getSavePath</span><span class="p">(),</span> <span class="n">sFileName</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">_fileExistsOnWasdi</span><span class="p">(</span><span class="n">sFilePath</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
                <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy._internalAddFileToWASDI: remote file is missing, uploading&#39;</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">uploadFile</span><span class="p">(</span><span class="n">sFileName</span><span class="p">)</span>
                    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy._internalAddFileToWASDI: file uploaded, keep on working!&#39;</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalAddFileToWASDI: could not proceed with upload&#39;</span> <span class="o">+</span>
                          <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>

        <span class="n">sUrl</span> <span class="o">=</span> <span class="n">getBaseUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/catalog/upload/ingestinws?file=&quot;</span> <span class="o">+</span> <span class="n">sFileName</span> <span class="o">+</span> <span class="s2">&quot;&amp;workspace=&quot;</span> <span class="o">+</span> <span class="n">getActiveWorkspaceId</span><span class="p">()</span>
        <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
        <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">oResponse</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalAddFileToWASDI: cannot contact server&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalAddFileToWASDI: failed, server replied &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">oJson</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">if</span> <span class="s1">&#39;stringValue&#39;</span> <span class="ow">in</span> <span class="n">oJson</span><span class="p">:</span>
                <span class="n">sProcessId</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">oJson</span><span class="p">[</span><span class="s1">&#39;stringValue&#39;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">bAsynch</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="n">sResult</span> <span class="o">=</span> <span class="n">sProcessId</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">sResult</span> <span class="o">=</span> <span class="n">waitProcess</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalAddFileToWASDI: something broke alongside&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">sResult</span>


<span class="k">def</span> <span class="nf">subset</span><span class="p">(</span><span class="n">sInputFile</span><span class="p">,</span> <span class="n">sOutputFile</span><span class="p">,</span> <span class="n">dLatN</span><span class="p">,</span> <span class="n">dLonW</span><span class="p">,</span> <span class="n">dLatS</span><span class="p">,</span> <span class="n">dLonE</span><span class="p">):</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.subset( &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sInputFile</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sOutputFile</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">dLatN</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dLonW</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dLatS</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dLonE</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">sInputFile</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.subset: input file must not be None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sInputFile</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.subset: input file name must not have zero length, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">sOutputFile</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.subset: output file must not be None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sOutputFile</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.subset: output file name len must not have zero length, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s2">&quot;/processing/geometric/subset?sSourceProductName=&quot;</span> <span class="o">+</span> <span class="n">sInputFile</span> <span class="o">+</span> <span class="s2">&quot;&amp;sDestinationProductName=&quot;</span> <span class="o">+</span> \
           <span class="n">sOutputFile</span> <span class="o">+</span> <span class="s2">&quot;&amp;sWorkspaceId=&quot;</span> <span class="o">+</span> <span class="n">m_sActiveWorkspace</span>
    <span class="n">sSubsetSetting</span> <span class="o">=</span> <span class="s2">&quot;{ </span><span class="se">\&quot;</span><span class="s2">latN</span><span class="se">\&quot;</span><span class="s2">:&quot;</span> <span class="o">+</span> <span class="n">dLatN</span> <span class="o">+</span> <span class="s2">&quot;, </span><span class="se">\&quot;</span><span class="s2">lonW</span><span class="se">\&quot;</span><span class="s2">:&quot;</span> <span class="o">+</span> <span class="n">dLonW</span> <span class="o">+</span> <span class="s2">&quot;, </span><span class="se">\&quot;</span><span class="s2">latS</span><span class="se">\&quot;</span><span class="s2">:&quot;</span> <span class="o">+</span> <span class="n">dLatS</span> <span class="o">+</span> <span class="s2">&quot;, </span><span class="se">\&quot;</span><span class="s2">lonE</span><span class="se">\&quot;</span><span class="s2">:&quot;</span> <span class="o">+</span> <span class="n">dLonE</span> <span class="o">+</span> <span class="s2">&quot; }&quot;</span>
    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">sSubsetSetting</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">oResponse</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.subset: cannot contact server&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.subset: failed, server returned &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">oJson</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">oJson</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;stringValue&#39;</span> <span class="ow">in</span> <span class="n">oJson</span><span class="p">:</span>
                <span class="n">sProcessId</span> <span class="o">=</span> <span class="n">oJson</span><span class="p">[</span><span class="s1">&#39;stringValue&#39;</span><span class="p">]</span>
                <span class="k">return</span> <span class="n">waitProcess</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;&#39;</span>


<span class="k">def</span> <span class="nf">executeWorkflow</span><span class="p">(</span><span class="n">asInputFileNames</span><span class="p">,</span> <span class="n">asOutputFileNames</span><span class="p">,</span> <span class="n">sWorkflowName</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_internalExecuteWorkflow</span><span class="p">(</span><span class="n">asInputFileNames</span><span class="p">,</span> <span class="n">asOutputFileNames</span><span class="p">,</span> <span class="n">sWorkflowName</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">asynchExecuteWorkflow</span><span class="p">(</span><span class="n">asInputFileNames</span><span class="p">,</span> <span class="n">asOutputFileNames</span><span class="p">,</span> <span class="n">sWorkflowName</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_internalExecuteWorkflow</span><span class="p">(</span><span class="n">asInputFileNames</span><span class="p">,</span> <span class="n">asOutputFileNames</span><span class="p">,</span> <span class="n">sWorkflowName</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_internalExecuteWorkflow</span><span class="p">(</span><span class="n">asInputFileNames</span><span class="p">,</span> <span class="n">asOutputFileNames</span><span class="p">,</span> <span class="n">sWorkflowName</span><span class="p">,</span> <span class="n">bAsynch</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal call to execute workflow</span>

<span class="sd">    :param asInputFileNames:</span>
<span class="sd">    :param asOutputFileNames:</span>
<span class="sd">    :param sWorkflowName:</span>
<span class="sd">    :param bAsynch:</span>
<span class="sd">    :return: processID if asynch, status of the executed process if synch, empty string in case of failure</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy._internalExecuteWorkflow( &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">asInputFileNames</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">asOutputFileNames</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sWorkflowName</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">bAsynch</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">asInputFileNames</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalExecuteWorkflow: input file names None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">asInputFileNames</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalExecuteWorkflow: no input file names, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="n">asOutputFileNames</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalExecuteWorkflow: output file names None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="c1"># elif len(asOutputFileNames) &lt;= 0:</span>
    <span class="c1">#     print(&#39;[ERROR] waspy._internalExecuteWorkflow: no output file names, aborting&#39;)</span>
    <span class="c1">#     return &#39;&#39;</span>

    <span class="k">if</span> <span class="n">sWorkflowName</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalExecuteWorkflow: workspace name is None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">sWorkflowName</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalExecuteWorkflow: workflow name too short, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="n">sProcessId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">sWorkflowId</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">getBaseUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/processing/graph_id?workspace=&quot;</span> <span class="o">+</span> <span class="n">getActiveWorkspaceId</span><span class="p">()</span>

    <span class="c1"># get a list of workflows, with entries in this form: :</span>
    <span class="c1">#   {  &quot;description&quot;:STRING,</span>
    <span class="c1">#       &quot;name&quot;: STRING,</span>
    <span class="c1">#       &quot;workflowId&quot;: STRING }</span>
    <span class="n">aoWorkflows</span> <span class="o">=</span> <span class="n">getWorkflows</span><span class="p">()</span>
    <span class="n">aoDictPayload</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">aoWorkflows</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalExecuteWorkflow: workflow list is None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">aoWorkflows</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalExecuteWorkflow: workflow list is empty, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">asWorkflow</span> <span class="ow">in</span> <span class="n">aoWorkflows</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">asWorkflow</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">asWorkflow</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">asWorkflow</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">sWorkflowName</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s2">&quot;workflowId&quot;</span> <span class="ow">in</span> <span class="n">asWorkflow</span><span class="p">:</span>
                            <span class="c1"># replace \&#39; with \&quot; everywhere</span>
                            <span class="n">aoDictPayload</span> <span class="o">=</span> <span class="p">{}</span>
                            <span class="n">aoDictPayload</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">asWorkflow</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">]</span>
                            <span class="n">aoDictPayload</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">asWorkflow</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
                            <span class="n">aoDictPayload</span><span class="p">[</span><span class="s2">&quot;workflowId&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">asWorkflow</span><span class="p">[</span><span class="s2">&quot;workflowId&quot;</span><span class="p">]</span>
                            <span class="k">break</span>
    <span class="k">if</span> <span class="n">aoDictPayload</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalExecuteWorkflow: workflow name not found, aborting&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">aoDictPayload</span><span class="p">[</span><span class="s2">&quot;inputFileNames&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">asInputFileNames</span>
        <span class="n">aoDictPayload</span><span class="p">[</span><span class="s2">&quot;outputFileNames&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">asOutputFileNames</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalExecuteWorkflow: payload could not be generated, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy._internalExecuteWorkflow: about to HTTP put to &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sUrl</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; with payload &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">aoDictPayload</span><span class="p">))</span>
    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">aoDictPayload</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">oResponse</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalExecuteWorkflow: communication with the server failed, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy._internalExecuteWorkflow: server replied OK&#39;</span><span class="p">)</span>
        <span class="n">asJson</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;stringValue&quot;</span> <span class="ow">in</span> <span class="n">asJson</span><span class="p">:</span>
            <span class="n">sProcessId</span> <span class="o">=</span> <span class="n">asJson</span><span class="p">[</span><span class="s2">&quot;stringValue&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">bAsynch</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">sProcessId</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">waitProcess</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalExecuteWorkflow: cannot find process ID in response, aborting&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy._internalExecuteWorkflow: server returned status &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span>


<span class="k">def</span> <span class="nf">mosaic</span><span class="p">(</span><span class="n">asInputFiles</span><span class="p">,</span> <span class="n">sOutputFile</span><span class="p">,</span> <span class="n">asBands</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
           <span class="n">fPixelSizeX</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">fPixelSizeY</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">sCrs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
           <span class="n">fSouthBound</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">fNorthBound</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">fEastBound</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">fWestBound</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span>
           <span class="n">sOverlappingMethod</span><span class="o">=</span><span class="s2">&quot;MOSAIC_TYPE_OVERLAY&quot;</span><span class="p">,</span> <span class="n">bShowSourceProducts</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">sElevationModelName</span><span class="o">=</span><span class="s2">&quot;ASTER 1sec GDEM&quot;</span><span class="p">,</span>
           <span class="n">sResamplingName</span><span class="o">=</span><span class="s2">&quot;Nearest&quot;</span><span class="p">,</span> <span class="n">bUpdateMode</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bNativeResolution</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sCombine</span><span class="o">=</span><span class="s2">&quot;OR&quot;</span><span class="p">,</span> <span class="n">bAsynch</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructs a mosaic out of a set of images</span>

<span class="sd">    :param asInputFiles: List of input files to mosaic</span>
<span class="sd">    :param sOutputFile: Name of the mosaic output file</span>
<span class="sd">    :param asBands: List of the bands to use for the mosaic</span>
<span class="sd">    :param fPixelSizeX: X Pixel Size</span>
<span class="sd">    :param fPixelSizeY: Y Pixel Size</span>
<span class="sd">    :param sCrs: WKT of the CRS to use</span>
<span class="sd">    :param fSouthBound: South Bound</span>
<span class="sd">    :param fNorthBound: North Bound</span>
<span class="sd">    :param fEastBound: East Bound</span>
<span class="sd">    :param fWestBound: West Bound</span>
<span class="sd">    :param sOverlappingMethod: Overlapping Method</span>
<span class="sd">    :param bShowSourceProducts: Show Source Products Flag</span>
<span class="sd">    :param sElevationModelName: DEM Model Name</span>
<span class="sd">    :param sResamplingName: Resampling Method Name</span>
<span class="sd">    :param bUpdateMode: Update Mode Flag</span>
<span class="sd">    :param bNativeResolution: Native Resolution Flag</span>
<span class="sd">    :param sCombine: Combine verb</span>
<span class="sd">    :param bAsynch: True to return after the triggering, False to wait the process to finish</span>
<span class="sd">    :return: Process ID is asynchronous execution, end status otherwise. An empty string is returned in case of failure</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO]  waspy.mosaic( &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">asInputFiles</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">sOutputFile</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">asBands</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">fPixelSizeX</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">fPixelSizeY</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">sCrs</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">fSouthBound</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">fNorthBound</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">fEastBound</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">fWestBound</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">sOverlappingMethod</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">bShowSourceProducts</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">sElevationModelName</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">sResamplingName</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">bUpdateMode</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">bNativeResolution</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">sCombine</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">bAsynch</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span>
         <span class="p">)</span>

    <span class="k">if</span> <span class="n">asInputFiles</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: list of input files is None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">asInputFiles</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: list of input files is empty, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="n">sOutputFile</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: name of output file is None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sOutputFile</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: output file name must be a string, but a &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">sOutputFile</span><span class="p">))</span> <span class="o">+</span>
              <span class="s1">&#39; was passed, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">sOutputFile</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: output file name is empty, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">getBaseUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/processing/geometric/mosaic?sDestinationProductName=&quot;</span> <span class="o">+</span> <span class="n">sOutputFile</span> <span class="o">+</span> <span class="s2">&quot;&amp;sWorkspaceId=&quot;</span> <span class="o">+</span> \
           <span class="n">getActiveWorkspaceId</span><span class="p">()</span>

    <span class="n">sOutputFormat</span> <span class="o">=</span> <span class="s2">&quot;GeoTIFF&quot;</span>
    <span class="k">if</span> <span class="n">sOutputFile</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.dim&quot;</span><span class="p">):</span>
        <span class="n">sOutputFormat</span> <span class="o">=</span> <span class="s2">&quot;BEAM-DIMAP&quot;</span>

    <span class="k">if</span> <span class="n">sCrs</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">sCrs</span> <span class="o">=</span> <span class="n">_getDefaultCRS</span><span class="p">()</span>

    <span class="c1"># todo check input type is appropriate</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">aoMosaicSettings</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;crs&#39;</span><span class="p">:</span> <span class="n">sCrs</span><span class="p">,</span>
            <span class="s1">&#39;southBound&#39;</span><span class="p">:</span> <span class="n">fSouthBound</span><span class="p">,</span>
            <span class="s1">&#39;eastBound&#39;</span><span class="p">:</span> <span class="n">fEastBound</span><span class="p">,</span>
            <span class="s1">&#39;northBound&#39;</span><span class="p">:</span> <span class="n">fNorthBound</span><span class="p">,</span>
            <span class="s1">&#39;westBound&#39;</span><span class="p">:</span> <span class="n">fWestBound</span><span class="p">,</span>
            <span class="s1">&#39;pixelSizeX&#39;</span><span class="p">:</span> <span class="n">fPixelSizeX</span><span class="p">,</span>
            <span class="s1">&#39;pixelSizeY&#39;</span><span class="p">:</span> <span class="n">fPixelSizeY</span><span class="p">,</span>
            <span class="s1">&#39;overlappingMethod&#39;</span><span class="p">:</span> <span class="n">sOverlappingMethod</span><span class="p">,</span>
            <span class="s1">&#39;showSourceProducts&#39;</span><span class="p">:</span> <span class="n">bShowSourceProducts</span><span class="p">,</span>
            <span class="s1">&#39;elevationModelName&#39;</span><span class="p">:</span> <span class="n">sElevationModelName</span><span class="p">,</span>
            <span class="s1">&#39;resamplingName&#39;</span><span class="p">:</span> <span class="n">sResamplingName</span><span class="p">,</span>
            <span class="s1">&#39;updateMode&#39;</span><span class="p">:</span> <span class="n">bUpdateMode</span><span class="p">,</span>
            <span class="s1">&#39;nativeResolution&#39;</span><span class="p">:</span> <span class="n">bNativeResolution</span><span class="p">,</span>
            <span class="s1">&#39;combine&#39;</span><span class="p">:</span> <span class="n">sCombine</span><span class="p">,</span>
            <span class="s1">&#39;outputFormat&#39;</span><span class="p">:</span> <span class="n">sOutputFormat</span><span class="p">,</span>
            <span class="s1">&#39;sources&#39;</span><span class="p">:</span> <span class="n">asInputFiles</span><span class="p">,</span>
            <span class="s1">&#39;variableNames&#39;</span><span class="p">:</span> <span class="n">asBands</span><span class="p">,</span>
            <span class="s1">&#39;variableExpressions&#39;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: cannot build DTO, please check your input. Aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">aoMosaicSettings</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">oResponse</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: cannot contact server, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">asJson</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">if</span> <span class="s1">&#39;stringValue&#39;</span> <span class="ow">in</span> <span class="n">asJson</span><span class="p">:</span>
            <span class="n">sProcessId</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">asJson</span><span class="p">[</span><span class="s1">&#39;stringValue&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">bAsynch</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">waitProcess</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">sProcessId</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: server respondend with status: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">return</span> <span class="s1">&#39;&#39;</span>


<span class="k">def</span> <span class="nf">_getDefaultCRS</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">(</span>
            <span class="s2">&quot;GEOGCS[</span><span class="se">\&quot;</span><span class="s2">WGS84(DD)</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\r\n</span><span class="s2">&quot;</span> <span class="o">+</span>
            <span class="s2">&quot;		  DATUM[</span><span class="se">\&quot;</span><span class="s2">WGS84</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\r\n</span><span class="s2">&quot;</span> <span class="o">+</span>
            <span class="s2">&quot;			SPHEROID[</span><span class="se">\&quot;</span><span class="s2">WGS84</span><span class="se">\&quot;</span><span class="s2">, 6378137.0, 298.257223563]], </span><span class="se">\r\n</span><span class="s2">&quot;</span> <span class="o">+</span>
            <span class="s2">&quot;		  PRIMEM[</span><span class="se">\&quot;</span><span class="s2">Greenwich</span><span class="se">\&quot;</span><span class="s2">, 0.0], </span><span class="se">\r\n</span><span class="s2">&quot;</span> <span class="o">+</span>
            <span class="s2">&quot;		  UNIT[</span><span class="se">\&quot;</span><span class="s2">degree</span><span class="se">\&quot;</span><span class="s2">, 0.017453292519943295], </span><span class="se">\r\n</span><span class="s2">&quot;</span> <span class="o">+</span>
            <span class="s2">&quot;		  AXIS[</span><span class="se">\&quot;</span><span class="s2">Geodetic longitude</span><span class="se">\&quot;</span><span class="s2">, EAST], </span><span class="se">\r\n</span><span class="s2">&quot;</span> <span class="o">+</span>
            <span class="s2">&quot;		  AXIS[</span><span class="se">\&quot;</span><span class="s2">Geodetic latitude</span><span class="se">\&quot;</span><span class="s2">, NORTH]]&quot;</span>
    <span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">_log</span><span class="p">(</span>
        <span class="s1">&#39;WASPY - The WASDI Python Library. Include in your code for space development processors. Visit www.wasdi.net&#39;</span>
    <span class="p">)</span>
</pre></div>

  </div>

  </header>

  <section id="section-items">
    <h2 class="section-title" id="header-variables">Module variables</h2>
      <div class="item">
      <p id="wasdi.m_aoParamsDictionary" class="name">var <span class="ident">m_aoParamsDictionary</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="wasdi.m_bDownloadActive" class="name">var <span class="ident">m_bDownloadActive</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="wasdi.m_bIsOnServer" class="name">var <span class="ident">m_bIsOnServer</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="wasdi.m_bUploadActive" class="name">var <span class="ident">m_bUploadActive</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="wasdi.m_bValidSession" class="name">var <span class="ident">m_bValidSession</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="wasdi.m_bVerbose" class="name">var <span class="ident">m_bVerbose</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="wasdi.m_sActiveWorkspace" class="name">var <span class="ident">m_sActiveWorkspace</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="wasdi.m_sBasePath" class="name">var <span class="ident">m_sBasePath</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="wasdi.m_sBaseUrl" class="name">var <span class="ident">m_sBaseUrl</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="wasdi.m_sMyProcId" class="name">var <span class="ident">m_sMyProcId</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="wasdi.m_sParametersFilePath" class="name">var <span class="ident">m_sParametersFilePath</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="wasdi.m_sPassword" class="name">var <span class="ident">m_sPassword</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="wasdi.m_sSessionId" class="name">var <span class="ident">m_sSessionId</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="wasdi.m_sUser" class="name">var <span class="ident">m_sUser</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="wasdi.name" class="name">var <span class="ident">name</span></p>
      
  
  <div class="source_cont">
</div>

      </div>

    <h2 class="section-title" id="header-functions">Functions</h2>
      
  <div class="item">
    <div class="name def" id="wasdi.addFileToWASDI">
    <p>def <span class="ident">addFileToWASDI</span>(</p><p>sFileName)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.addFileToWASDI', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.addFileToWASDI" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">addFileToWASDI</span><span class="p">(</span><span class="n">sFileName</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_internalAddFileToWASDI</span><span class="p">(</span><span class="n">sFileName</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.addParameter">
    <p>def <span class="ident">addParameter</span>(</p><p>sKey, oValue)</p>
    </div>
    

    
  
    <div class="desc"><p>Adds a parameter
:param sKey: parameter key
:param oValue: parameter value</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.addParameter', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.addParameter" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">addParameter</span><span class="p">(</span><span class="n">sKey</span><span class="p">,</span> <span class="n">oValue</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a parameter</span>
<span class="sd">    :param sKey: parameter key</span>
<span class="sd">    :param oValue: parameter value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_aoParamsDictionary</span>
    <span class="n">m_aoParamsDictionary</span><span class="p">[</span><span class="n">sKey</span><span class="p">]</span> <span class="o">=</span> <span class="n">oValue</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.asynchAddFileToWASDI">
    <p>def <span class="ident">asynchAddFileToWASDI</span>(</p><p>sFileName)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.asynchAddFileToWASDI', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.asynchAddFileToWASDI" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">asynchAddFileToWASDI</span><span class="p">(</span><span class="n">sFileName</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_internalAddFileToWASDI</span><span class="p">(</span><span class="n">sFileName</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.asynchExecuteProcessor">
    <p>def <span class="ident">asynchExecuteProcessor</span>(</p><p>sProcessorName, aoParams={})</p>
    </div>
    

    
  
    <div class="desc"><p>Execute a WASDI processor asynchronously
:param sProcessorName: WASDI processor name
:param aoParams: a dictionary of parameters for the processor
:return: processor ID</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.asynchExecuteProcessor', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.asynchExecuteProcessor" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">asynchExecuteProcessor</span><span class="p">(</span><span class="n">sProcessorName</span><span class="p">,</span> <span class="n">aoParams</span><span class="o">=</span><span class="p">{}):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Execute a WASDI processor asynchronously</span>
<span class="sd">    :param sProcessorName: WASDI processor name</span>
<span class="sd">    :param aoParams: a dictionary of parameters for the processor</span>
<span class="sd">    :return: processor ID</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.asynchExecuteProcessor( &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sProcessorName</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">aoParams</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">sProcessorName</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.asynchExecuteProcessor: processor name is None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">sProcessorName</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.asynchExecuteProcessor: processor name empty, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">aoParams</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.asynchExecuteProcessor: parameters must be a dictionary but it is not, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">getBaseUrl</span><span class="p">()</span> <span class="o">+</span> \
           <span class="s2">&quot;/processors/run?workspace=&quot;</span> <span class="o">+</span> <span class="n">getActiveWorkspaceId</span><span class="p">()</span> <span class="o">+</span> \
           <span class="s2">&quot;&amp;name=&quot;</span> <span class="o">+</span> <span class="n">sProcessorName</span> <span class="o">+</span> \
           <span class="s2">&quot;&amp;encodedJson=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">aoParams</span><span class="p">)</span>
    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">aoParams</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">oResponse</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.asynchExecuteProcessor: something broke when contacting the server, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.asynchExecuteProcessor: API call OK&#39;</span><span class="p">)</span>
        <span class="n">aoJson</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;processingIdentifier&quot;</span> <span class="ow">in</span> <span class="n">aoJson</span><span class="p">:</span>
            <span class="n">sProcessID</span> <span class="o">=</span> <span class="n">aoJson</span><span class="p">[</span><span class="s1">&#39;processingIdentifier&#39;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">sProcessID</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.asynchExecuteProcessor: cannot extract processing identifier from response, aborting&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.asynchExecuteProcessor: server returned status &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.asynchExecuteWorkflow">
    <p>def <span class="ident">asynchExecuteWorkflow</span>(</p><p>asInputFileNames, asOutputFileNames, sWorkflowName)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.asynchExecuteWorkflow', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.asynchExecuteWorkflow" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">asynchExecuteWorkflow</span><span class="p">(</span><span class="n">asInputFileNames</span><span class="p">,</span> <span class="n">asOutputFileNames</span><span class="p">,</span> <span class="n">sWorkflowName</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_internalExecuteWorkflow</span><span class="p">(</span><span class="n">asInputFileNames</span><span class="p">,</span> <span class="n">asOutputFileNames</span><span class="p">,</span> <span class="n">sWorkflowName</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.deleteProduct">
    <p>def <span class="ident">deleteProduct</span>(</p><p>sProduct)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.deleteProduct', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.deleteProduct" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">deleteProduct</span><span class="p">(</span><span class="n">sProduct</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>

    <span class="k">if</span> <span class="n">sProduct</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.deleteProduct: product passed is None&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span>
    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;/product/delete?sProductName=&quot;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">sProduct</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;&amp;bDeleteFile=true&amp;sWorkspaceId=&quot;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">m_sActiveWorkspace</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;&amp;bDeleteLayer=true&quot;</span>
    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">oResult</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.deleteProduct: deletion failed&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">elif</span> <span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.deleteProduct: deletion failed, server returned: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">oResult</span><span class="o">.</span><span class="n">ok</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.downloadFile">
    <p>def <span class="ident">downloadFile</span>(</p><p>sFileName)</p>
    </div>
    

    
  
    <div class="desc"><p>Ingest a new file in the Active WASDI Workspace.
The method takes a file saved in the workspace root (see getSaveFilePath) not already added to the WS
To work be sure that the file is on the server</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.downloadFile', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.downloadFile" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">downloadFile</span><span class="p">(</span><span class="n">sFileName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ingest a new file in the Active WASDI Workspace.</span>
<span class="sd">    The method takes a file saved in the workspace root (see getSaveFilePath) not already added to the WS</span>
<span class="sd">    To work be sure that the file is on the server</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.downloadFile( &#39;</span> <span class="o">+</span> <span class="n">sFileName</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span><span class="p">)</span>

    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;filename&#39;</span><span class="p">:</span> <span class="n">sFileName</span><span class="p">}</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s1">&#39;/catalog/downloadbyname?&#39;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s1">&#39;filename=&#39;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">sFileName</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;&amp;workspace=&quot;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">getActiveWorkspaceId</span><span class="p">()</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.downloadfile: send request to configured url &#39;</span> <span class="o">+</span> <span class="n">sUrl</span><span class="p">)</span>

    <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResponse</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">):</span>
        <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.downloadFile: got ok result, downloading&#39;</span><span class="p">)</span>
        <span class="n">sAttachmentName</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">asResponseHeaders</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">headers</span>
        <span class="k">if</span> <span class="n">asResponseHeaders</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;Content-Disposition&#39;</span> <span class="ow">in</span> <span class="n">asResponseHeaders</span><span class="p">:</span>
                <span class="n">sContentDisposition</span> <span class="o">=</span> <span class="n">asResponseHeaders</span><span class="p">[</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">]</span>
                <span class="n">sAttachmentName</span> <span class="o">=</span> <span class="n">sContentDisposition</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;filename=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">while</span> <span class="n">bLoop</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;.&#39;</span><span class="p">:</span>
                        <span class="n">sAttachmentName</span> <span class="o">=</span> <span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">):</span>
                        <span class="n">sAttachmentName</span> <span class="o">=</span> <span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">):</span>
                        <span class="n">sAttachmentName</span> <span class="o">=</span> <span class="n">sAttachmentName</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\&quot;</span><span class="s1">&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">):</span>
                        <span class="n">sAttachmentName</span> <span class="o">=</span> <span class="n">sAttachmentName</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\&quot;</span><span class="s1">&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">sAttachmentName</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">):</span>
                        <span class="n">sAttachmentName</span> <span class="o">=</span> <span class="n">sAttachmentName</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">bLoop</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">sSavePath</span> <span class="o">=</span> <span class="n">getSavePath</span><span class="p">()</span>
        <span class="n">sSavePath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sSavePath</span><span class="p">,</span> <span class="n">sAttachmentName</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">sSavePath</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>  <span class="c1"># Guard against race condition</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.downloadFile: cannot create File Path, aborting&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.downloadFile: downloading local file &#39;</span> <span class="o">+</span> <span class="n">sSavePath</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">sSavePath</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">oFile</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">oChunk</span> <span class="ow">in</span> <span class="n">oResponse</span><span class="p">:</span>
                <span class="c1"># _log(&#39;.&#39;)</span>
                <span class="n">oFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">oChunk</span><span class="p">)</span>
        <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.downloadFile: download done, new file locally available &#39;</span> <span class="o">+</span> <span class="n">sSavePath</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">sAttachmentName</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> \
                <span class="p">(</span><span class="n">sAttachmentName</span> <span class="o">!=</span> <span class="n">sFileName</span><span class="p">)</span> <span class="ow">and</span> \
                <span class="n">sAttachmentName</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.zip&#39;</span><span class="p">):</span>
            <span class="n">sPath</span> <span class="o">=</span> <span class="n">getSavePath</span><span class="p">()</span>
            <span class="n">_unzip</span><span class="p">(</span><span class="n">sAttachmentName</span><span class="p">,</span> <span class="n">sPath</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.downloadFile: download error, server code: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>

    <span class="k">return</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.executeProcessor">
    <p>def <span class="ident">executeProcessor</span>(</p><p>sProcessorName, aoProcessParams)</p>
    </div>
    

    
  
    <div class="desc"><p>Executes a WASDI Processor
return the Process Id if every thing is ok
return '' if there was any problem</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.executeProcessor', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.executeProcessor" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">executeProcessor</span><span class="p">(</span><span class="n">sProcessorName</span><span class="p">,</span> <span class="n">aoProcessParams</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes a WASDI Processor</span>
<span class="sd">    return the Process Id if every thing is ok</span>
<span class="sd">    return &#39;&#39; if there was any problem</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>

    <span class="n">sEncodedParams</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">aoProcessParams</span><span class="p">)</span>
    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;workspace&#39;</span><span class="p">:</span> <span class="n">m_sActiveWorkspace</span><span class="p">,</span>
               <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">sProcessorName</span><span class="p">,</span>
               <span class="s1">&#39;sProcessorName&#39;</span><span class="p">:</span> <span class="n">sEncodedParams</span><span class="p">}</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/processors/run&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="n">sProcessId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResults</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">sProcessId</span> <span class="o">=</span> <span class="n">oJsonResults</span><span class="p">[</span><span class="s1">&#39;processingIdentifier&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">sProcessId</span>

    <span class="k">return</span> <span class="n">sProcessId</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.executeWorkflow">
    <p>def <span class="ident">executeWorkflow</span>(</p><p>asInputFileNames, asOutputFileNames, sWorkflowName)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.executeWorkflow', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.executeWorkflow" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">executeWorkflow</span><span class="p">(</span><span class="n">asInputFileNames</span><span class="p">,</span> <span class="n">asOutputFileNames</span><span class="p">,</span> <span class="n">sWorkflowName</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_internalExecuteWorkflow</span><span class="p">(</span><span class="n">asInputFileNames</span><span class="p">,</span> <span class="n">asOutputFileNames</span><span class="p">,</span> <span class="n">sWorkflowName</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getActiveWorkspaceId">
    <p>def <span class="ident">getActiveWorkspaceId</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Get Active workspace Id
return the WorkspaceId as a String, '' if there is any error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getActiveWorkspaceId', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getActiveWorkspaceId" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getActiveWorkspaceId</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get Active workspace Id</span>
<span class="sd">    return the WorkspaceId as a String, &#39;&#39; if there is any error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>
    <span class="k">return</span> <span class="n">m_sActiveWorkspace</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getBasePath">
    <p>def <span class="ident">getBasePath</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the local Base Path for WASDI</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getBasePath', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getBasePath" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getBasePath</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the local Base Path for WASDI</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBasePath</span>
    <span class="k">return</span> <span class="n">m_sBasePath</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getBaseUrl">
    <p>def <span class="ident">getBaseUrl</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the WASDI API URL</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getBaseUrl', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getBaseUrl" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getBaseUrl</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the WASDI API URL</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">return</span> <span class="n">m_sBaseUrl</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getDownloadActive">
    <p>def <span class="ident">getDownloadActive</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the WASDI API URL</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getDownloadActive', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getDownloadActive" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getDownloadActive</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the WASDI API URL</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_bDownloadActive</span>
    <span class="k">return</span> <span class="n">m_bDownloadActive</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getFoundProductName">
    <p>def <span class="ident">getFoundProductName</span>(</p><p>aoProduct)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getFoundProductName', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getFoundProductName" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getFoundProductName</span><span class="p">(</span><span class="n">aoProduct</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">aoProduct</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.getFoundProductName: product is None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="s2">&quot;title&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">aoProduct</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.getFoundProductName: title not found in product, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">aoProduct</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getFullProductPath">
    <p>def <span class="ident">getFullProductPath</span>(</p><p>sProductName)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the full local path of a product given the product name.
Use the output of this API to open the file</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getFullProductPath', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getFullProductPath" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getFullProductPath</span><span class="p">(</span><span class="n">sProductName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the full local path of a product given the product name.</span>
<span class="sd">    Use the output of this API to open the file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBasePath</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>
    <span class="k">global</span> <span class="n">m_sUser</span>
    <span class="k">global</span> <span class="n">m_bIsOnServer</span>
    <span class="k">global</span> <span class="n">m_bDownloadActive</span>

    <span class="k">if</span> <span class="n">m_bIsOnServer</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">sFullPath</span> <span class="o">=</span> <span class="s1">&#39;/data/wasdi/&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sFullPath</span> <span class="o">=</span> <span class="n">m_sBasePath</span>

    <span class="n">sFullPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sFullPath</span><span class="p">,</span> <span class="n">m_sUser</span><span class="p">,</span> <span class="n">m_sActiveWorkspace</span><span class="p">,</span> <span class="n">sProductName</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">m_bIsOnServer</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">m_bDownloadActive</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">sFullPath</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
                <span class="c1"># Download The File from WASDI</span>
                <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.getFullProductPath: LOCAL WASDI FILE MISSING: START DOWNLOAD... PLEASE WAIT&#39;</span><span class="p">)</span>
                <span class="n">downloadFile</span><span class="p">(</span><span class="n">sProductName</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">sFullPath</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getIsOnServer">
    <p>def <span class="ident">getIsOnServer</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the WASDI API URL</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getIsOnServer', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getIsOnServer" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getIsOnServer</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the WASDI API URL</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_bIsOnServer</span>
    <span class="k">return</span> <span class="n">m_bIsOnServer</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getParameter">
    <p>def <span class="ident">getParameter</span>(</p><p>sKey)</p>
    </div>
    

    
  
    <div class="desc"><p>Gets a parameter using its key
:param sKey: parameter key
:return: parameter value</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getParameter', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getParameter" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getParameter</span><span class="p">(</span><span class="n">sKey</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets a parameter using its key</span>
<span class="sd">    :param sKey: parameter key</span>
<span class="sd">    :return: parameter value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_aoParamsDictionary</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">m_aoParamsDictionary</span><span class="p">[</span><span class="n">sKey</span><span class="p">]</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getParametersDict">
    <p>def <span class="ident">getParametersDict</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the full Params Dictionary
:return: a dictionary containing the parameters</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getParametersDict', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getParametersDict" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getParametersDict</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the full Params Dictionary</span>
<span class="sd">    :return: a dictionary containing the parameters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_aoParamsDictionary</span>
    <span class="k">return</span> <span class="n">m_aoParamsDictionary</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getParametersFilePath">
    <p>def <span class="ident">getParametersFilePath</span>(</p><p>)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getParametersFilePath', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getParametersFilePath" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getParametersFilePath</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">m_sParametersFilePath</span>
    <span class="k">return</span> <span class="n">m_sParametersFilePath</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getPassword">
    <p>def <span class="ident">getPassword</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the WASDI Password</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getPassword', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getPassword" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getPassword</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the WASDI Password</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sPassword</span>
    <span class="k">return</span> <span class="n">m_sPassword</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getProcId">
    <p>def <span class="ident">getProcId</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the Own Proc Id</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getProcId', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getProcId" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getProcId</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the Own Proc Id</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sMyProcId</span>
    <span class="k">return</span> <span class="n">m_sMyProcId</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getProcessStatus">
    <p>def <span class="ident">getProcessStatus</span>(</p><p>sProcessId)</p>
    </div>
    

    
  
    <div class="desc"><p>get the status of a Process
return the status or '' if there was any error</p>
<p>STATUS are  CREATED,  RUNNING,  STOPPED,  DONE,  ERROR</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getProcessStatus', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getProcessStatus" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getProcessStatus</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the status of a Process</span>
<span class="sd">    return the status or &#39;&#39; if there was any error</span>

<span class="sd">    STATUS are  CREATED,  RUNNING,  STOPPED,  DONE,  ERROR</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sProcessId&#39;</span><span class="p">:</span> <span class="n">sProcessId</span><span class="p">}</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/process/byid&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="n">sStatus</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">sStatus</span> <span class="o">=</span> <span class="n">oJsonResult</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">sStatus</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">return</span> <span class="n">sStatus</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getProductsByActiveWorkspace">
    <p>def <span class="ident">getProductsByActiveWorkspace</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the list of products in a workspace
the list is an array of string. Can be empty if there is any error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getProductsByActiveWorkspace', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getProductsByActiveWorkspace" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getProductsByActiveWorkspace</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the list of products in a workspace</span>
<span class="sd">    the list is an array of string. Can be empty if there is any error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>

    <span class="k">return</span> <span class="n">getProductsByWorkspaceId</span><span class="p">(</span><span class="n">m_sActiveWorkspace</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getProductsByWorkspace">
    <p>def <span class="ident">getProductsByWorkspace</span>(</p><p>sWorkspaceName)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the list of products in a workspace
the list is an array of string. Can be empty if there is any error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getProductsByWorkspace', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getProductsByWorkspace" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getProductsByWorkspace</span><span class="p">(</span><span class="n">sWorkspaceName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the list of products in a workspace</span>
<span class="sd">    the list is an array of string. Can be empty if there is any error</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">sWorkspaceId</span> <span class="o">=</span> <span class="n">getWorkspaceIdByName</span><span class="p">(</span><span class="n">sWorkspaceName</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">getProductsByWorkspaceId</span><span class="p">(</span><span class="n">sWorkspaceId</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getProductsByWorkspaceId">
    <p>def <span class="ident">getProductsByWorkspaceId</span>(</p><p>sWorkspaceId)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the list of products in a workspace (by Id)
the list is an array of string. Can be empty if there is any error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getProductsByWorkspaceId', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getProductsByWorkspaceId" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getProductsByWorkspaceId</span><span class="p">(</span><span class="n">sWorkspaceId</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the list of products in a workspace (by Id)</span>
<span class="sd">    the list is an array of string. Can be empty if there is any error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>

    <span class="n">m_sActiveWorkspace</span> <span class="o">=</span> <span class="n">sWorkspaceId</span>
    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sWorkspaceId&#39;</span><span class="p">:</span> <span class="n">sWorkspaceId</span><span class="p">}</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/product/byws&#39;</span>

    <span class="n">asProducts</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">oJsonResults</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">oProduct</span> <span class="ow">in</span> <span class="n">oJsonResults</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">asProducts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">oProduct</span><span class="p">[</span><span class="s1">&#39;fileName&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">continue</span>

    <span class="k">return</span> <span class="n">asProducts</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getSavePath">
    <p>def <span class="ident">getSavePath</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the local base save path for a product. To save use this path + fileName. Path already include '/' as last char</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getSavePath', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getSavePath" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getSavePath</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the local base save path for a product. To save use this path + fileName. Path already include &#39;/&#39; as last char</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBasePath</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>
    <span class="k">global</span> <span class="n">m_sUser</span>

    <span class="k">if</span> <span class="n">m_bIsOnServer</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">sFullPath</span> <span class="o">=</span> <span class="s1">&#39;/data/wasdi/&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sFullPath</span> <span class="o">=</span> <span class="n">m_sBasePath</span>

    <span class="c1"># empty string at the ends adds a final separator</span>
    <span class="n">sFullPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sFullPath</span><span class="p">,</span> <span class="n">m_sUser</span><span class="p">,</span> <span class="n">m_sActiveWorkspace</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">sFullPath</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getSessionId">
    <p>def <span class="ident">getSessionId</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the WASDI Session</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getSessionId', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getSessionId" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getSessionId</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the WASDI Session</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">return</span> <span class="n">m_sSessionId</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getUploadActive">
    <p>def <span class="ident">getUploadActive</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the WASDI API URL</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getUploadActive', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getUploadActive" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getUploadActive</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the WASDI API URL</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_bUploadActive</span>
    <span class="k">return</span> <span class="n">m_bUploadActive</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getUser">
    <p>def <span class="ident">getUser</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the WASDI User</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getUser', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getUser" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getUser</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the WASDI User</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sUser</span>
    <span class="k">return</span> <span class="n">m_sUser</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getVerbose">
    <p>def <span class="ident">getVerbose</span>(</p><p>)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getVerbose', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getVerbose" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getVerbose</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">m_bVerbose</span>
    <span class="k">return</span> <span class="n">m_bVerbose</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getWorkflows">
    <p>def <span class="ident">getWorkflows</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the list of workflows for the user
Return None if there is any error
Return an array of WASDI Workspace JSON Objects if everything is ok, None otherwise. The format is as follows:</p>
<p>{
    "description":STRING,
    "name": STRING,
    "workflowId": STRING
}</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getWorkflows', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getWorkflows" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getWorkflows</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the list of workflows for the user</span>
<span class="sd">        Return None if there is any error</span>
<span class="sd">        Return an array of WASDI Workspace JSON Objects if everything is ok, None otherwise. The format is as follows:</span>

<span class="sd">        {</span>
<span class="sd">            &quot;description&quot;:STRING,</span>
<span class="sd">            &quot;name&quot;: STRING,</span>
<span class="sd">            &quot;workflowId&quot;: STRING</span>
<span class="sd">        }</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/processing/getgraphsbyusr&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResults</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">oJsonResults</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getWorkspaceIdByName">
    <p>def <span class="ident">getWorkspaceIdByName</span>(</p><p>sName)</p>
    </div>
    

    
  
    <div class="desc"><p>Get Id of a Workspace from the name
Return the WorkspaceId as a String, '' if there is any error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getWorkspaceIdByName', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getWorkspaceIdByName" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getWorkspaceIdByName</span><span class="p">(</span><span class="n">sName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get Id of a Workspace from the name</span>
<span class="sd">    Return the WorkspaceId as a String, &#39;&#39; if there is any error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/ws/byuser&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">oWorkspace</span> <span class="ow">in</span> <span class="n">oJsonResult</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">oWorkspace</span><span class="p">[</span><span class="s1">&#39;workspaceName&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">sName</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">oWorkspace</span><span class="p">[</span><span class="s1">&#39;workspaceId&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.getWorkspaces">
    <p>def <span class="ident">getWorkspaces</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Get List of user workspaces
:return: an array of WASDI Workspace JSON Objects.
Each Object is like this
{
    "ownerUserId":STRING,
    "sharedUsers":[STRING],
    "workspaceId":STRING,
    "workspaceName":STRING
}</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.getWorkspaces', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.getWorkspaces" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getWorkspaces</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get List of user workspaces</span>
<span class="sd">    :return: an array of WASDI Workspace JSON Objects.</span>
<span class="sd">    Each Object is like this</span>
<span class="sd">    {</span>
<span class="sd">        &quot;ownerUserId&quot;:STRING,</span>
<span class="sd">        &quot;sharedUsers&quot;:[STRING],</span>
<span class="sd">        &quot;workspaceId&quot;:STRING,</span>
<span class="sd">        &quot;workspaceName&quot;:STRING</span>
<span class="sd">    }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/ws/byuser&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">oJsonResult</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.hello">
    <p>def <span class="ident">hello</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Hello Wasdi to test the connection.
:return: the hello message as Text</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.hello', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.hello" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hello Wasdi to test the connection.</span>
<span class="sd">    :return: the hello message as Text</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/wasdi/hello&#39;</span>
    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">oResult</span><span class="o">.</span><span class="n">text</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.importProduct">
    <p>def <span class="ident">importProduct</span>(</p><p>sFileUrl=None, sBoundingBox=None, asProduct=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Imports a product from a Provider in WASDI
:param sFileUrl:
:param sBoundingBox:
:return: execution status</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.importProduct', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.importProduct" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">importProduct</span><span class="p">(</span><span class="n">sFileUrl</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">sBoundingBox</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">asProduct</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Imports a product from a Provider in WASDI</span>
<span class="sd">    :param sFileUrl:</span>
<span class="sd">    :param sBoundingBox:</span>
<span class="sd">    :return: execution status</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.importProduct( &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sFileUrl</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sBoundingBox</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">asProduct</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span><span class="p">)</span>

    <span class="n">sReturn</span> <span class="o">=</span> <span class="s2">&quot;ERROR&quot;</span>

    <span class="k">if</span> <span class="n">sFileUrl</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">asProduct</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="s2">&quot;link&quot;</span> <span class="ow">in</span> <span class="n">asProduct</span><span class="p">:</span>
        <span class="n">sFileUrl</span> <span class="o">=</span> <span class="n">asProduct</span><span class="p">[</span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;footprint&quot;</span> <span class="ow">in</span> <span class="n">asProduct</span><span class="p">:</span>
            <span class="n">sBoundingBox</span> <span class="o">=</span> <span class="n">asProduct</span><span class="p">[</span><span class="s2">&quot;footprint&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">sFileUrl</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.importProduct: cannot find a link to download the requested product&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sReturn</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">getBaseUrl</span><span class="p">()</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;/filebuffer/download?sFileUrl=&quot;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">sFileUrl</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;&amp;sProvider=ONDA&amp;sWorkspaceId=&quot;</span>
    <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">getActiveWorkspaceId</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">sBoundingBox</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">sUrl</span> <span class="o">+=</span> <span class="s2">&quot;&amp;sBoundingBox=&quot;</span>
        <span class="n">sUrl</span> <span class="o">+=</span> <span class="n">sBoundingBox</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>

    <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">oResponse</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.importProduct: cannot import product&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.importProduct: cannot import product, server returned: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">oJsonResponse</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;boolValue&quot;</span> <span class="ow">in</span> <span class="n">oJsonResponse</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oJsonResponse</span><span class="p">[</span><span class="s2">&quot;boolValue&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">&quot;stringValue&quot;</span> <span class="ow">in</span> <span class="n">oJsonResponse</span><span class="p">:</span>
                <span class="n">sProcessId</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">oJsonResponse</span><span class="p">[</span><span class="s2">&quot;stringValue&quot;</span><span class="p">])</span>
                <span class="n">sReturn</span> <span class="o">=</span> <span class="n">waitProcess</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">sReturn</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.init">
    <p>def <span class="ident">init</span>(</p><p>sConfigFilePath=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Init WASDI Library. Call it after setting user, password, path and url or use it with a config file
Return True if login was successful, False otherwise</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.init', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.init" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">sConfigFilePath</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Init WASDI Library. Call it after setting user, password, path and url or use it with a config file</span>
<span class="sd">    Return True if login was successful, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sUser</span>
    <span class="k">global</span> <span class="n">m_sPassword</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">global</span> <span class="n">m_sBasePath</span>
    <span class="k">global</span> <span class="n">m_bValidSession</span>

    <span class="n">sWname</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">sWId</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="n">sConfigFilePath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">bConfigOk</span><span class="p">,</span> <span class="n">sWname</span><span class="p">,</span> <span class="n">sWId</span> <span class="o">=</span> <span class="n">_loadConfig</span><span class="p">(</span><span class="n">sConfigFilePath</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bConfigOk</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">_loadParams</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">m_sUser</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.init: must initialize user first, but None given&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>

    <span class="k">if</span> <span class="n">m_sBasePath</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">m_bIsOnServer</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">m_sBasePath</span> <span class="o">=</span> <span class="s1">&#39;/data/wasdi/&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sHome</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
            <span class="c1"># the empty string at the end adds a separator</span>
            <span class="n">m_sBasePath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sHome</span><span class="p">,</span> <span class="s2">&quot;.wasdi&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">m_sSessionId</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
        <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/auth/checksession&#39;</span>
        <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">oResponse</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
            <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">sUser</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">oJsonResult</span><span class="p">[</span><span class="s1">&#39;userId&#39;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">sUser</span> <span class="o">==</span> <span class="n">m_sUser</span><span class="p">:</span>
                    <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">m_sPassword</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.init: must initialize password first, but None given&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="n">asHeaders</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">}</span>
        <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/auth/login&#39;</span>
        <span class="n">sPayload</span> <span class="o">=</span> <span class="s1">&#39;{&quot;userId&quot;:&quot;&#39;</span> <span class="o">+</span> <span class="n">m_sUser</span> <span class="o">+</span> <span class="s1">&#39;&quot;,&quot;userPassword&quot;:&quot;&#39;</span> <span class="o">+</span> <span class="n">m_sPassword</span> <span class="o">+</span> <span class="s1">&#39;&quot; }&#39;</span>
        <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">sPayload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">oResponse</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.init: cannot authenticate&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
            <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">elif</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.init: cannot authenticate, server replied: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
            <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">m_sSessionId</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">oJsonResult</span><span class="p">[</span><span class="s1">&#39;sessionId&#39;</span><span class="p">])</span>
                <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.init: returned session is: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">m_sSessionId</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">m_sSessionId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">m_sSessionId</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">m_sSessionId</span> <span class="o">!=</span> <span class="s1">&#39;None&#39;</span><span class="p">:</span>
                    <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">m_bValidSession</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">if</span> <span class="n">m_bValidSession</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.init: WASPY successfully initiated :-)&#39;</span><span class="p">)</span>
        <span class="n">sW</span> <span class="o">=</span> <span class="n">getActiveWorkspaceId</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">sW</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sW</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">sWname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">openWorkspace</span><span class="p">(</span><span class="n">sWname</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">sWId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">openWorkspaceById</span><span class="p">(</span><span class="n">sWId</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.init: could not init WASPY :-(&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>

    <span class="n">printStatus</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">m_bValidSession</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.mosaic">
    <p>def <span class="ident">mosaic</span>(</p><p>asInputFiles, sOutputFile, asBands=None, fPixelSizeX=-1.0, fPixelSizeY=-1.0, sCrs=None, fSouthBound=-1.0, fNorthBound=-1.0, fEastBound=-1.0, fWestBound=-1.0, sOverlappingMethod=&#39;MOSAIC_TYPE_OVERLAY&#39;, bShowSourceProducts=False, sElevationModelName=&#39;ASTER 1sec GDEM&#39;, sResamplingName=&#39;Nearest&#39;, bUpdateMode=False, bNativeResolution=True, sCombine=&#39;OR&#39;, bAsynch=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Constructs a mosaic out of a set of images</p>
<p>:param asInputFiles: List of input files to mosaic
:param sOutputFile: Name of the mosaic output file
:param asBands: List of the bands to use for the mosaic
:param fPixelSizeX: X Pixel Size
:param fPixelSizeY: Y Pixel Size
:param sCrs: WKT of the CRS to use
:param fSouthBound: South Bound
:param fNorthBound: North Bound
:param fEastBound: East Bound
:param fWestBound: West Bound
:param sOverlappingMethod: Overlapping Method
:param bShowSourceProducts: Show Source Products Flag
:param sElevationModelName: DEM Model Name
:param sResamplingName: Resampling Method Name
:param bUpdateMode: Update Mode Flag
:param bNativeResolution: Native Resolution Flag
:param sCombine: Combine verb
:param bAsynch: True to return after the triggering, False to wait the process to finish
:return: Process ID is asynchronous execution, end status otherwise. An empty string is returned in case of failure</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.mosaic', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.mosaic" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">mosaic</span><span class="p">(</span><span class="n">asInputFiles</span><span class="p">,</span> <span class="n">sOutputFile</span><span class="p">,</span> <span class="n">asBands</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
           <span class="n">fPixelSizeX</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">fPixelSizeY</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">sCrs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
           <span class="n">fSouthBound</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">fNorthBound</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">fEastBound</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">fWestBound</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span>
           <span class="n">sOverlappingMethod</span><span class="o">=</span><span class="s2">&quot;MOSAIC_TYPE_OVERLAY&quot;</span><span class="p">,</span> <span class="n">bShowSourceProducts</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">sElevationModelName</span><span class="o">=</span><span class="s2">&quot;ASTER 1sec GDEM&quot;</span><span class="p">,</span>
           <span class="n">sResamplingName</span><span class="o">=</span><span class="s2">&quot;Nearest&quot;</span><span class="p">,</span> <span class="n">bUpdateMode</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">bNativeResolution</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sCombine</span><span class="o">=</span><span class="s2">&quot;OR&quot;</span><span class="p">,</span> <span class="n">bAsynch</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructs a mosaic out of a set of images</span>

<span class="sd">    :param asInputFiles: List of input files to mosaic</span>
<span class="sd">    :param sOutputFile: Name of the mosaic output file</span>
<span class="sd">    :param asBands: List of the bands to use for the mosaic</span>
<span class="sd">    :param fPixelSizeX: X Pixel Size</span>
<span class="sd">    :param fPixelSizeY: Y Pixel Size</span>
<span class="sd">    :param sCrs: WKT of the CRS to use</span>
<span class="sd">    :param fSouthBound: South Bound</span>
<span class="sd">    :param fNorthBound: North Bound</span>
<span class="sd">    :param fEastBound: East Bound</span>
<span class="sd">    :param fWestBound: West Bound</span>
<span class="sd">    :param sOverlappingMethod: Overlapping Method</span>
<span class="sd">    :param bShowSourceProducts: Show Source Products Flag</span>
<span class="sd">    :param sElevationModelName: DEM Model Name</span>
<span class="sd">    :param sResamplingName: Resampling Method Name</span>
<span class="sd">    :param bUpdateMode: Update Mode Flag</span>
<span class="sd">    :param bNativeResolution: Native Resolution Flag</span>
<span class="sd">    :param sCombine: Combine verb</span>
<span class="sd">    :param bAsynch: True to return after the triggering, False to wait the process to finish</span>
<span class="sd">    :return: Process ID is asynchronous execution, end status otherwise. An empty string is returned in case of failure</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO]  waspy.mosaic( &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">asInputFiles</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">sOutputFile</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">asBands</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">fPixelSizeX</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">fPixelSizeY</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">sCrs</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">fSouthBound</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">fNorthBound</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">fEastBound</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">fWestBound</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">sOverlappingMethod</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">bShowSourceProducts</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">sElevationModelName</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">sResamplingName</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">bUpdateMode</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">bNativeResolution</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">sCombine</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">bAsynch</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span>
         <span class="p">)</span>

    <span class="k">if</span> <span class="n">asInputFiles</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: list of input files is None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">asInputFiles</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: list of input files is empty, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="n">sOutputFile</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: name of output file is None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sOutputFile</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: output file name must be a string, but a &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">sOutputFile</span><span class="p">))</span> <span class="o">+</span>
              <span class="s1">&#39; was passed, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">sOutputFile</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: output file name is empty, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">getBaseUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/processing/geometric/mosaic?sDestinationProductName=&quot;</span> <span class="o">+</span> <span class="n">sOutputFile</span> <span class="o">+</span> <span class="s2">&quot;&amp;sWorkspaceId=&quot;</span> <span class="o">+</span> \
           <span class="n">getActiveWorkspaceId</span><span class="p">()</span>

    <span class="n">sOutputFormat</span> <span class="o">=</span> <span class="s2">&quot;GeoTIFF&quot;</span>
    <span class="k">if</span> <span class="n">sOutputFile</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.dim&quot;</span><span class="p">):</span>
        <span class="n">sOutputFormat</span> <span class="o">=</span> <span class="s2">&quot;BEAM-DIMAP&quot;</span>

    <span class="k">if</span> <span class="n">sCrs</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">sCrs</span> <span class="o">=</span> <span class="n">_getDefaultCRS</span><span class="p">()</span>

    <span class="c1"># todo check input type is appropriate</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">aoMosaicSettings</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;crs&#39;</span><span class="p">:</span> <span class="n">sCrs</span><span class="p">,</span>
            <span class="s1">&#39;southBound&#39;</span><span class="p">:</span> <span class="n">fSouthBound</span><span class="p">,</span>
            <span class="s1">&#39;eastBound&#39;</span><span class="p">:</span> <span class="n">fEastBound</span><span class="p">,</span>
            <span class="s1">&#39;northBound&#39;</span><span class="p">:</span> <span class="n">fNorthBound</span><span class="p">,</span>
            <span class="s1">&#39;westBound&#39;</span><span class="p">:</span> <span class="n">fWestBound</span><span class="p">,</span>
            <span class="s1">&#39;pixelSizeX&#39;</span><span class="p">:</span> <span class="n">fPixelSizeX</span><span class="p">,</span>
            <span class="s1">&#39;pixelSizeY&#39;</span><span class="p">:</span> <span class="n">fPixelSizeY</span><span class="p">,</span>
            <span class="s1">&#39;overlappingMethod&#39;</span><span class="p">:</span> <span class="n">sOverlappingMethod</span><span class="p">,</span>
            <span class="s1">&#39;showSourceProducts&#39;</span><span class="p">:</span> <span class="n">bShowSourceProducts</span><span class="p">,</span>
            <span class="s1">&#39;elevationModelName&#39;</span><span class="p">:</span> <span class="n">sElevationModelName</span><span class="p">,</span>
            <span class="s1">&#39;resamplingName&#39;</span><span class="p">:</span> <span class="n">sResamplingName</span><span class="p">,</span>
            <span class="s1">&#39;updateMode&#39;</span><span class="p">:</span> <span class="n">bUpdateMode</span><span class="p">,</span>
            <span class="s1">&#39;nativeResolution&#39;</span><span class="p">:</span> <span class="n">bNativeResolution</span><span class="p">,</span>
            <span class="s1">&#39;combine&#39;</span><span class="p">:</span> <span class="n">sCombine</span><span class="p">,</span>
            <span class="s1">&#39;outputFormat&#39;</span><span class="p">:</span> <span class="n">sOutputFormat</span><span class="p">,</span>
            <span class="s1">&#39;sources&#39;</span><span class="p">:</span> <span class="n">asInputFiles</span><span class="p">,</span>
            <span class="s1">&#39;variableNames&#39;</span><span class="p">:</span> <span class="n">asBands</span><span class="p">,</span>
            <span class="s1">&#39;variableExpressions&#39;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: cannot build DTO, please check your input. Aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">aoMosaicSettings</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">oResponse</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: cannot contact server, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">asJson</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">if</span> <span class="s1">&#39;stringValue&#39;</span> <span class="ow">in</span> <span class="n">asJson</span><span class="p">:</span>
            <span class="n">sProcessId</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">asJson</span><span class="p">[</span><span class="s1">&#39;stringValue&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">bAsynch</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">waitProcess</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">sProcessId</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.mosaic: server respondend with status: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.openWorkspace">
    <p>def <span class="ident">openWorkspace</span>(</p><p>sWorkspaceName)</p>
    </div>
    

    
  
    <div class="desc"><p>Open a workspace
return the WorkspaceId as a String, '' if there is any error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.openWorkspace', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.openWorkspace" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">openWorkspace</span><span class="p">(</span><span class="n">sWorkspaceName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Open a workspace</span>
<span class="sd">    return the WorkspaceId as a String, &#39;&#39; if there is any error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>
    <span class="n">m_sActiveWorkspace</span> <span class="o">=</span> <span class="n">getWorkspaceIdByName</span><span class="p">(</span><span class="n">sWorkspaceName</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">m_sActiveWorkspace</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.openWorkspaceById">
    <p>def <span class="ident">openWorkspaceById</span>(</p><p>sWorkspaceId)</p>
    </div>
    

    
  
    <div class="desc"><p>Open a workspace by Id
return the WorkspaceId as a String, '' if there is any error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.openWorkspaceById', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.openWorkspaceById" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">openWorkspaceById</span><span class="p">(</span><span class="n">sWorkspaceId</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Open a workspace by Id</span>
<span class="sd">    return the WorkspaceId as a String, &#39;&#39; if there is any error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>
    <span class="n">m_sActiveWorkspace</span> <span class="o">=</span> <span class="n">sWorkspaceId</span>
    <span class="k">return</span> <span class="n">m_sActiveWorkspace</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.printStatus">
    <p>def <span class="ident">printStatus</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Prints status</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.printStatus', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.printStatus" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">printStatus</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Prints status</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>
    <span class="k">global</span> <span class="n">m_sParametersFilePath</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">global</span> <span class="n">m_sBasePath</span>
    <span class="k">global</span> <span class="n">m_bDownloadActive</span>
    <span class="k">global</span> <span class="n">m_bUploadActive</span>
    <span class="k">global</span> <span class="n">m_bVerbose</span>
    <span class="k">global</span> <span class="n">m_aoParamsDictionary</span>
    <span class="k">global</span> <span class="n">m_sMyProcId</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_bIsOnServer</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: user: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getUser</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: password: ***********&#39;</span><span class="p">)</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: session id: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getSessionId</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: active workspace: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getActiveWorkspaceId</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: parameters file path: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getParametersFilePath</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: base path: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getBasePath</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: download active: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getDownloadActive</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: upload active: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getUploadActive</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: verbose: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getVerbose</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: param dict: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getParametersDict</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: proc id: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getProcId</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: base url: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getBaseUrl</span><span class="p">()))</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: is on server: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">getIsOnServer</span><span class="p">()))</span>
    <span class="k">if</span> <span class="n">m_bValidSession</span><span class="p">:</span>
        <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.printStatus: session is valid :-)&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.printStatus: session is not valid :-(&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.refreshParameters">
    <p>def <span class="ident">refreshParameters</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Refresh parameters, reading the file again</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.refreshParameters', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.refreshParameters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refreshParameters</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Refresh parameters, reading the file again</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_loadParams</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.saveFile">
    <p>def <span class="ident">saveFile</span>(</p><p>sFileName)</p>
    </div>
    

    
  
    <div class="desc"><p>Ingest a new file in the Active WASDI Workspace.
The method takes a file saved in the workspace root (see getSaveFilePath) not already added to the WS
To work be sure that the file is on the server</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.saveFile', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.saveFile" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">saveFile</span><span class="p">(</span><span class="n">sFileName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ingest a new file in the Active WASDI Workspace.</span>
<span class="sd">    The method takes a file saved in the workspace root (see getSaveFilePath) not already added to the WS</span>
<span class="sd">    To work be sure that the file is on the server</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="n">sFileName</span><span class="p">,</span> <span class="s1">&#39;workspace&#39;</span><span class="p">:</span> <span class="n">m_sActiveWorkspace</span><span class="p">}</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/catalog/upload/ingestinws&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="n">sProcessId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">oJsonResult</span><span class="p">[</span><span class="s1">&#39;boolValue&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
                <span class="n">sProcessId</span> <span class="o">=</span> <span class="n">oJsonResult</span><span class="p">[</span><span class="s1">&#39;stringValue&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">sProcessId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">return</span> <span class="n">sProcessId</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.searchEOImages">
    <p>def <span class="ident">searchEOImages</span>(</p><p>sPlatform, sDateFrom, sDateTo, fULLat=None, fULLon=None, fLRLat=None, fLRLon=None, sProductType=None, iOrbitNumber=None, sSensorOperationalMode=None, sCloudCoverage=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Search EO images</p>
<p>:param sPlatform: satellite platform (S1 or S2)
:param sDateFrom: inital date YYYY-MM-DD
:param sDateTo: final date YYYY-MM-DD
:param fULLat: Latitude of Upper-Left corner
:param fULLon: Longitude of Upper-Left corner
:param fLRLat: Latitude of Lower-Right corner
:param fLRLon: Longitude of Lower-Right corner
:param sProductType: type of EO product
:param iOrbitNumber: orbit number
:param sSensorOperationalMode: sensor operational mode
:param sCloudCoverage: interval of allowed cloud coverage, e.g. "[0 TO 22.5]"
:return: a list of results</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.searchEOImages', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.searchEOImages" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">searchEOImages</span><span class="p">(</span><span class="n">sPlatform</span><span class="p">,</span> <span class="n">sDateFrom</span><span class="p">,</span> <span class="n">sDateTo</span><span class="p">,</span>
                   <span class="n">fULLat</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fULLon</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fLRLat</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fLRLon</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                   <span class="n">sProductType</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">iOrbitNumber</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                   <span class="n">sSensorOperationalMode</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">sCloudCoverage</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Search EO images</span>

<span class="sd">    :param sPlatform: satellite platform (S1 or S2)</span>
<span class="sd">    :param sDateFrom: inital date YYYY-MM-DD</span>
<span class="sd">    :param sDateTo: final date YYYY-MM-DD</span>
<span class="sd">    :param fULLat: Latitude of Upper-Left corner</span>
<span class="sd">    :param fULLon: Longitude of Upper-Left corner</span>
<span class="sd">    :param fLRLat: Latitude of Lower-Right corner</span>
<span class="sd">    :param fLRLon: Longitude of Lower-Right corner</span>
<span class="sd">    :param sProductType: type of EO product</span>
<span class="sd">    :param iOrbitNumber: orbit number</span>
<span class="sd">    :param sSensorOperationalMode: sensor operational mode</span>
<span class="sd">    :param sCloudCoverage: interval of allowed cloud coverage, e.g. &quot;[0 TO 22.5]&quot;</span>
<span class="sd">    :return: a list of results</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">aoReturnList</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">sPlatform</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.searchEOImages: platform cannot be None&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="c1"># todo support other platforms</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">sPlatform</span> <span class="o">!=</span> <span class="s2">&quot;S1&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">sPlatform</span> <span class="o">!=</span> <span class="s2">&quot;S2&quot;</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.searchEOImages: platform must be S1 or S2. Received [&#39;</span> <span class="o">+</span> <span class="n">sPlatform</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="k">if</span> <span class="n">sPlatform</span> <span class="o">==</span> <span class="s2">&quot;S1&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">sProductType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">sProductType</span> <span class="o">==</span> <span class="s2">&quot;SLC&quot;</span> <span class="ow">or</span> <span class="n">sProductType</span> <span class="o">==</span> <span class="s2">&quot;GRD&quot;</span> <span class="ow">or</span> <span class="n">sProductType</span> <span class="o">==</span> <span class="s2">&quot;OCN&quot;</span><span class="p">):</span>
                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;[ERROR] waspy.searchEOImages: Available Product Types for S1; SLC, GRD, OCN. Received [&quot;</span> <span class="o">+</span>
                      <span class="n">sProductType</span> <span class="o">+</span>
                      <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="k">if</span> <span class="n">sPlatform</span> <span class="o">==</span> <span class="s2">&quot;S2&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">sProductType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">sProductType</span> <span class="o">==</span> <span class="s2">&quot;S2MSI1C&quot;</span> <span class="ow">or</span> <span class="n">sProductType</span> <span class="o">==</span> <span class="s2">&quot;S2MSI2Ap&quot;</span> <span class="ow">or</span> <span class="n">sProductType</span> <span class="o">==</span> <span class="s2">&quot;S2MSI2A&quot;</span><span class="p">):</span>
                <span class="k">print</span><span class="p">(</span>
                    <span class="s2">&quot;[ERROR] waspy.searchEOImages: Available Product Types for S2; S2MSI1C, S2MSI2Ap, S2MSI2A. Received [&quot;</span>
                    <span class="o">+</span> <span class="n">sProductType</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span> <span class="o">+</span>
                    <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="k">if</span> <span class="n">sDateFrom</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;[ERROR] waspy.searchEOImages: sDateFrom cannot be None&quot;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="c1"># if (len(sDateFrom) &lt; 10) or (sDateFrom[4] != &#39;-&#39;) or (sDateFrom[7] != &#39;-&#39;):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d\d\d\d\-\d\d\-\d\d&quot;</span><span class="p">,</span> <span class="n">sDateFrom</span><span class="p">)):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;[ERROR] waspy.searchEOImages: sDateFrom must be in format YYYY-MM-DD&quot;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="k">if</span> <span class="n">sDateTo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;[ERROR] waspy.searchEOImages: sDateTo cannot be None&quot;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="c1"># if len(sDateTo) &lt; 10 or sDateTo[4] != &#39;-&#39; or sDateTo[7] != &#39;-&#39;:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d\d\d\d\-\d\d\-\d\d&quot;</span><span class="p">,</span> <span class="n">sDateTo</span><span class="p">)):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;[ERROR] waspy.searchEOImages: sDateTo must be in format YYYY-MM-DD&quot;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">aoReturnList</span>

    <span class="c1"># create query string:</span>

    <span class="c1"># platform name</span>
    <span class="n">sQuery</span> <span class="o">=</span> <span class="s2">&quot;( platformname:&quot;</span>
    <span class="k">if</span> <span class="n">sPlatform</span> <span class="o">==</span> <span class="s2">&quot;S2&quot;</span><span class="p">:</span>
        <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot;Sentinel-2 &quot;</span>
    <span class="k">elif</span> <span class="n">sPlatform</span> <span class="o">==</span> <span class="s2">&quot;S1&quot;</span><span class="p">:</span>
        <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot;Sentinel-1&quot;</span>

    <span class="c1"># If available add product type</span>
    <span class="k">if</span> <span class="n">sProductType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot; AND producttype:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sProductType</span><span class="p">)</span>

    <span class="c1"># If available Sensor Operational Mode</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">sSensorOperationalMode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">sPlatform</span> <span class="o">==</span> <span class="s2">&quot;S1&quot;</span><span class="p">):</span>
        <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot; AND sensoroperationalmode:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sSensorOperationalMode</span><span class="p">)</span>

    <span class="c1"># If available cloud coverage</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">sCloudCoverage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">sCloudCoverage</span> <span class="o">==</span> <span class="s2">&quot;S2&quot;</span><span class="p">):</span>
        <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot; AND cloudcoverpercentage:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sCloudCoverage</span><span class="p">)</span>

    <span class="c1"># If available add orbit number</span>
    <span class="k">if</span> <span class="n">iOrbitNumber</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iOrbitNumber</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot; AND relativeorbitnumber:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">iOrbitNumber</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[WARNING] waspy.searchEOImages: iOrbitNumber is&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">iOrbitNumber</span><span class="p">),</span>
                  <span class="s1">&#39;, but it should be an integer&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">iTmp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">iOrbitNumber</span><span class="p">)</span>
                <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[WARNING] waspy.searchEOImages: iOrbitNumber converted to: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">iTmp</span><span class="p">))</span>
                <span class="n">sQuery</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">iTmp</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[WARNING] waspy.searchEOImages: could not convert iOrbitNumber to an int, ignoring it&#39;</span> <span class="o">+</span>
                      <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>

            <span class="c1"># Close the first block</span>
    <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot;) &quot;</span>

    <span class="c1"># Date Block</span>
    <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot;AND ( beginPosition:[&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sDateFrom</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;T00:00:00.000Z TO &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sDateTo</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;T23:59:59.999Z]&quot;</span>
    <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot;AND ( endPosition:[&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sDateFrom</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;T00:00:00.000Z TO &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sDateTo</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;T23:59:59.999Z]&quot;</span>

    <span class="c1"># Close the second block</span>
    <span class="n">sQuery</span> <span class="o">+=</span> <span class="s2">&quot;) &quot;</span>

    <span class="c1"># footprint polygon</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fULLat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fULLon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fLRLat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fLRLon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">):</span>
        <span class="n">sFootPrint</span> <span class="o">=</span> <span class="s2">&quot;( footprint:</span><span class="se">\&quot;</span><span class="s2">intersects(POLYGON(( &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fULLon</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fLRLat</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> \
                     <span class="nb">str</span><span class="p">(</span><span class="n">fULLon</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fULLat</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fLRLon</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fULLat</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fLRLon</span><span class="p">)</span> <span class="o">+</span> \
                     <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fLRLat</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fULLon</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fLRLat</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)))</span><span class="se">\&quot;</span><span class="s2">) AND &quot;</span>
    <span class="n">sQuery</span> <span class="o">=</span> <span class="n">sFootPrint</span> <span class="o">+</span> <span class="n">sQuery</span>

    <span class="n">sQueryBody</span> <span class="o">=</span> <span class="s2">&quot;[</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">sQuery</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\\&quot;</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">]&quot;</span>
    <span class="n">sQuery</span> <span class="o">=</span> <span class="s2">&quot;sQuery=&quot;</span> <span class="o">+</span> <span class="n">sQuery</span> <span class="o">+</span> <span class="s2">&quot;&amp;offset=0&amp;limit=10&amp;providers=ONDA&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">sUrl</span> <span class="o">=</span> <span class="n">getBaseUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/search/querylist?&quot;</span> <span class="o">+</span> <span class="n">sQuery</span>
        <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
        <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">sQueryBody</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># populate list from response</span>
            <span class="n">oJsonResponse</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="n">aoReturnList</span> <span class="o">=</span> <span class="n">oJsonResponse</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">oEx</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.searchEOImages: exception while trying to convert response into JSON object&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">aoReturnList</span>

        <span class="n">_log</span><span class="p">(</span><span class="s2">&quot;[INFO] waspy.searchEOImages: search results:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">aoReturnList</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">aoReturnList</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">oEx</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.searchEOImages: an error occured&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="n">_log</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">oEx</span><span class="p">))</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="n">_log</span><span class="p">(</span><span class="n">oEx</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">aoReturnList</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.setActiveWorkspaceId">
    <p>def <span class="ident">setActiveWorkspaceId</span>(</p><p>sActiveWorkspace)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.setActiveWorkspaceId', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.setActiveWorkspaceId" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setActiveWorkspaceId</span><span class="p">(</span><span class="n">sActiveWorkspace</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>
    <span class="n">m_sActiveWorkspace</span> <span class="o">=</span> <span class="n">sActiveWorkspace</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.setBasePath">
    <p>def <span class="ident">setBasePath</span>(</p><p>sBasePath)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the local Base Path for WASDI</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.setBasePath', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.setBasePath" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setBasePath</span><span class="p">(</span><span class="n">sBasePath</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the local Base Path for WASDI</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBasePath</span>
    <span class="n">m_sBasePath</span> <span class="o">=</span> <span class="n">sBasePath</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.setBaseUrl">
    <p>def <span class="ident">setBaseUrl</span>(</p><p>sBaseUrl)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the WASDI API URL</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.setBaseUrl', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.setBaseUrl" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setBaseUrl</span><span class="p">(</span><span class="n">sBaseUrl</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the WASDI API URL</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="n">m_sBaseUrl</span> <span class="o">=</span> <span class="n">sBaseUrl</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.setDownloadActive">
    <p>def <span class="ident">setDownloadActive</span>(</p><p>bDownloadActive)</p>
    </div>
    

    
  
    <div class="desc"><p>When in development, set True to download locally files from Server.
Set it to false to NOT donwload data. In this case the developer must check the availability of the files</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.setDownloadActive', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.setDownloadActive" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setDownloadActive</span><span class="p">(</span><span class="n">bDownloadActive</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    When in development, set True to download locally files from Server.</span>
<span class="sd">    Set it to false to NOT donwload data. In this case the developer must check the availability of the files</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">bDownloadActive</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.setDownloadActive: passed None, won</span><span class="se">\&#39;</span><span class="s1">t change&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">global</span> <span class="n">m_bDownloadActive</span>
    <span class="n">m_bDownloadActive</span> <span class="o">=</span> <span class="n">bDownloadActive</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.setIsOnServer">
    <p>def <span class="ident">setIsOnServer</span>(</p><p>bIsOnServer)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the Is on Server Flag: keep it false, as default, while developing</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.setIsOnServer', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.setIsOnServer" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setIsOnServer</span><span class="p">(</span><span class="n">bIsOnServer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the Is on Server Flag: keep it false, as default, while developing</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_bIsOnServer</span>
    <span class="n">m_bIsOnServer</span> <span class="o">=</span> <span class="n">bIsOnServer</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.setParametersFilePath">
    <p>def <span class="ident">setParametersFilePath</span>(</p><p>sParamPath)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.setParametersFilePath', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.setParametersFilePath" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setParametersFilePath</span><span class="p">(</span><span class="n">sParamPath</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">sParamPath</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.setParametersFilePath: passed None as path, won</span><span class="se">\&#39;</span><span class="s1">t change&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sParamPath</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.setParametersFilePath: string passed has zero length, won</span><span class="se">\&#39;</span><span class="s1">t change&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">global</span> <span class="n">m_sParametersFilePath</span>
    <span class="n">m_sParametersFilePath</span> <span class="o">=</span> <span class="n">sParamPath</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.setPassword">
    <p>def <span class="ident">setPassword</span>(</p><p>sPassword)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the WASDI Password</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.setPassword', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.setPassword" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setPassword</span><span class="p">(</span><span class="n">sPassword</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the WASDI Password</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sPassword</span>
    <span class="n">m_sPassword</span> <span class="o">=</span> <span class="n">sPassword</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.setProcId">
    <p>def <span class="ident">setProcId</span>(</p><p>sProcID)</p>
    </div>
    

    
  
    <div class="desc"><p>Own Proc Id</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.setProcId', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.setProcId" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setProcId</span><span class="p">(</span><span class="n">sProcID</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Own Proc Id</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sMyProcId</span>
    <span class="n">m_sMyProcId</span> <span class="o">=</span> <span class="n">sProcID</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.setProcessPayload">
    <p>def <span class="ident">setProcessPayload</span>(</p><p>sProcessId, data)</p>
    </div>
    

    
  
    <div class="desc"><p>Update the status of a process
return the updated status as a String or '' if there was any problem</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.setProcessPayload', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.setProcessPayload" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setProcessPayload</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the status of a process</span>
<span class="sd">    return the updated status as a String or &#39;&#39; if there was any problem</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sProcessId&#39;</span><span class="p">:</span> <span class="n">sProcessId</span><span class="p">,</span> <span class="s1">&#39;payload&#39;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)}</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/process/setpayload&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="n">sStatus</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sStatus</span> <span class="o">=</span> <span class="n">oJsonResult</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">sStatus</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">return</span> <span class="n">sStatus</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.setSessionId">
    <p>def <span class="ident">setSessionId</span>(</p><p>sSessionId)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the WASDI Session</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.setSessionId', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.setSessionId" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setSessionId</span><span class="p">(</span><span class="n">sSessionId</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the WASDI Session</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="n">m_sSessionId</span> <span class="o">=</span> <span class="n">sSessionId</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.setUploadActive">
    <p>def <span class="ident">setUploadActive</span>(</p><p>bUploadActive)</p>
    </div>
    

    
  
    <div class="desc"><p>When in development, set True to upload local files on Server.
Set it to false to NOT upload data. In this case the developer must check the availability of the files</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.setUploadActive', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.setUploadActive" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setUploadActive</span><span class="p">(</span><span class="n">bUploadActive</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    When in development, set True to upload local files on Server.</span>
<span class="sd">    Set it to false to NOT upload data. In this case the developer must check the availability of the files</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">bUploadActive</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.setUploadActive: passed None, won</span><span class="se">\&#39;</span><span class="s1">t change&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">global</span> <span class="n">m_bUploadActive</span>
    <span class="n">m_bUploadActive</span> <span class="o">=</span> <span class="n">bUploadActive</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.setUser">
    <p>def <span class="ident">setUser</span>(</p><p>sUser)</p>
    </div>
    

    
  
    <div class="desc"><p>Sets the WASDI User
:param sUser: WASDI UserID
:return:</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.setUser', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.setUser" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setUser</span><span class="p">(</span><span class="n">sUser</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the WASDI User</span>
<span class="sd">    :param sUser: WASDI UserID</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">m_sUser</span>
    <span class="n">m_sUser</span> <span class="o">=</span> <span class="n">sUser</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.setVerbose">
    <p>def <span class="ident">setVerbose</span>(</p><p>bVerbose)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.setVerbose', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.setVerbose" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setVerbose</span><span class="p">(</span><span class="n">bVerbose</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">bVerbose</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.setVerbose: passed None, won</span><span class="se">\&#39;</span><span class="s1">t change&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bVerbose</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.setVerbose: passed non boolean, trying to convert&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bVerbose</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">bVerbose</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.setVerbose: cannot convert argument into boolean, won</span><span class="se">\&#39;</span><span class="s1">t change&#39;</span> <span class="o">+</span>
                  <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="k">global</span> <span class="n">m_bVerbose</span>
    <span class="n">m_bVerbose</span> <span class="o">=</span> <span class="n">bVerbose</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.subset">
    <p>def <span class="ident">subset</span>(</p><p>sInputFile, sOutputFile, dLatN, dLonW, dLatS, dLonE)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.subset', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.subset" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">subset</span><span class="p">(</span><span class="n">sInputFile</span><span class="p">,</span> <span class="n">sOutputFile</span><span class="p">,</span> <span class="n">dLatN</span><span class="p">,</span> <span class="n">dLonW</span><span class="p">,</span> <span class="n">dLatS</span><span class="p">,</span> <span class="n">dLonE</span><span class="p">):</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.subset( &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sInputFile</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sOutputFile</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>
         <span class="nb">str</span><span class="p">(</span><span class="n">dLatN</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dLonW</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dLatS</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dLonE</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">sInputFile</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.subset: input file must not be None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sInputFile</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.subset: input file name must not have zero length, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">sOutputFile</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.subset: output file must not be None, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sOutputFile</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.subset: output file name len must not have zero length, aborting&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s2">&quot;/processing/geometric/subset?sSourceProductName=&quot;</span> <span class="o">+</span> <span class="n">sInputFile</span> <span class="o">+</span> <span class="s2">&quot;&amp;sDestinationProductName=&quot;</span> <span class="o">+</span> \
           <span class="n">sOutputFile</span> <span class="o">+</span> <span class="s2">&quot;&amp;sWorkspaceId=&quot;</span> <span class="o">+</span> <span class="n">m_sActiveWorkspace</span>
    <span class="n">sSubsetSetting</span> <span class="o">=</span> <span class="s2">&quot;{ </span><span class="se">\&quot;</span><span class="s2">latN</span><span class="se">\&quot;</span><span class="s2">:&quot;</span> <span class="o">+</span> <span class="n">dLatN</span> <span class="o">+</span> <span class="s2">&quot;, </span><span class="se">\&quot;</span><span class="s2">lonW</span><span class="se">\&quot;</span><span class="s2">:&quot;</span> <span class="o">+</span> <span class="n">dLonW</span> <span class="o">+</span> <span class="s2">&quot;, </span><span class="se">\&quot;</span><span class="s2">latS</span><span class="se">\&quot;</span><span class="s2">:&quot;</span> <span class="o">+</span> <span class="n">dLatS</span> <span class="o">+</span> <span class="s2">&quot;, </span><span class="se">\&quot;</span><span class="s2">lonE</span><span class="se">\&quot;</span><span class="s2">:&quot;</span> <span class="o">+</span> <span class="n">dLonE</span> <span class="o">+</span> <span class="s2">&quot; }&quot;</span>
    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">sSubsetSetting</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">oResponse</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.subset: cannot contact server&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.subset: failed, server returned &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">oJson</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">oJson</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;stringValue&#39;</span> <span class="ow">in</span> <span class="n">oJson</span><span class="p">:</span>
                <span class="n">sProcessId</span> <span class="o">=</span> <span class="n">oJson</span><span class="p">[</span><span class="s1">&#39;stringValue&#39;</span><span class="p">]</span>
                <span class="k">return</span> <span class="n">waitProcess</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.updateProcessStatus">
    <p>def <span class="ident">updateProcessStatus</span>(</p><p>sProcessId, sStatus, iPerc)</p>
    </div>
    

    
  
    <div class="desc"><p>Update the status of a process
return the updated status as a String or '' if there was any problem</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.updateProcessStatus', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.updateProcessStatus" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">updateProcessStatus</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">,</span> <span class="n">sStatus</span><span class="p">,</span> <span class="n">iPerc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the status of a process</span>
<span class="sd">    return the updated status as a String or &#39;&#39; if there was any problem</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">sProcessId</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProcessStatus: cannot update status, process ID is None&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">sStatus</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProcessStatus: cannot update status, status is None&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">iPerc</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProcessStatus: percentage is None&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="n">iPerc</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProcessStatus: iPerc &lt; 0 not valid&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="n">iPerc</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProcessStatus: iPerc &gt; 100 not valid&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="n">sStatus</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;CREATED&#39;</span><span class="p">,</span> <span class="s1">&#39;RUNNING&#39;</span><span class="p">,</span> <span class="s1">&#39;STOPPED&#39;</span><span class="p">,</span> <span class="s1">&#39;DONE&#39;</span><span class="p">,</span> <span class="s1">&#39;ERROR&#39;</span><span class="p">}:</span>
        <span class="k">print</span><span class="p">(</span>
            <span class="s1">&#39;[ERROR] waspy.updateProcessStatus: sStatus must be a string in: &#39;</span> <span class="o">+</span>
            <span class="s1">&#39;{CREATED,  RUNNING,  STOPPED,  DONE,  ERROR&#39;</span> <span class="o">+</span>
            <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">elif</span> <span class="n">sProcessId</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>

    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sProcessId&#39;</span><span class="p">:</span> <span class="n">sProcessId</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="n">sStatus</span><span class="p">,</span> <span class="s1">&#39;perc&#39;</span><span class="p">:</span> <span class="n">iPerc</span><span class="p">}</span>

    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/process/updatebyid&#39;</span>

    <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="n">sStatus</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">oResult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJsonResult</span> <span class="o">=</span> <span class="n">oResult</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sStatus</span> <span class="o">=</span> <span class="n">oJsonResult</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">sStatus</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">return</span> <span class="n">sStatus</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.updateProgressPerc">
    <p>def <span class="ident">updateProgressPerc</span>(</p><p>iPerc)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.updateProgressPerc', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.updateProgressPerc" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">updateProgressPerc</span><span class="p">(</span><span class="n">iPerc</span><span class="p">):</span>
    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.updateProgressPerc( &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">iPerc</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">iPerc</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProgressPerc: Passed None, expected a percentage&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">getProcId</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">getProcId</span><span class="p">())</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProgressPerc: Cannot update progress: process ID is not known&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="mi">0</span> <span class="o">&gt;</span> <span class="n">iPerc</span> <span class="ow">or</span> <span class="mi">100</span> <span class="o">&lt;</span> <span class="n">iPerc</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[WARNING] waspy.updateProgressPerc: passed&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">iPerc</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, automatically resetting in [0, 100]&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">iPerc</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">iPerc</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">iPerc</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="n">iPerc</span> <span class="o">=</span> <span class="mi">100</span>

    <span class="n">sStatus</span> <span class="o">=</span> <span class="s2">&quot;RUNNING&quot;</span>
    <span class="n">sUrl</span> <span class="o">=</span> <span class="n">getBaseUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/process/updatebyid?sProcessId=&quot;</span> <span class="o">+</span> <span class="n">getProcId</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;&amp;status=&quot;</span> <span class="o">+</span> <span class="n">sStatus</span> <span class="o">+</span> <span class="s2">&quot;&amp;perc=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
        <span class="n">iPerc</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&amp;sendrabbit=1&quot;</span>
    <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
    <span class="n">oResponse</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
    <span class="n">sResult</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">oResponse</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">oResponse</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">oJson</span> <span class="o">=</span> <span class="n">oResponse</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">oJson</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;status&quot;</span> <span class="ow">in</span> <span class="n">oJson</span><span class="p">):</span>
            <span class="n">sResult</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">oJson</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.updateProgressPerc: could not update progress&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sResult</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.uploadFile">
    <p>def <span class="ident">uploadFile</span>(</p><p>sFileName)</p>
    </div>
    

    
  
    <div class="desc"><p>Uploads a file to WASDI
:param sFileName: name of file inside working directory OR path to file RELATIVE to working directory
:return: True if succeded, False otherwise</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.uploadFile', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.uploadFile" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">uploadFile</span><span class="p">(</span><span class="n">sFileName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Uploads a file to WASDI</span>
<span class="sd">    :param sFileName: name of file inside working directory OR path to file RELATIVE to working directory</span>
<span class="sd">    :return: True if succeded, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_log</span><span class="p">(</span><span class="s1">&#39;[INFO] waspy.upload( &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sFileName</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; )&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">sFileName</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.upload: the given file name is None, cannot upload&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="n">sFileName</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">):</span>
        <span class="n">sFileName</span> <span class="o">=</span> <span class="n">sFileName</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">if</span> <span class="n">sFileName</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">sFileName</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">):</span>
        <span class="n">sFileName</span> <span class="o">=</span> <span class="n">sFileName</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

    <span class="n">sFileName</span> <span class="o">=</span> <span class="n">_normPath</span><span class="p">(</span><span class="n">sFileName</span><span class="p">)</span>

    <span class="n">bResult</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="n">sBasePath</span> <span class="o">=</span> <span class="n">getBasePath</span><span class="p">()</span>
    <span class="n">sFullPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sBasePath</span><span class="p">,</span> <span class="n">sFileName</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">bResult</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.waitProcess">
    <p>def <span class="ident">waitProcess</span>(</p><p>sProcessId)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.waitProcess', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.waitProcess" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">waitProcess</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">sProcessId</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.waitProcess: Passed None, expected a process ID&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;ERROR&quot;</span>

    <span class="k">if</span> <span class="n">sProcessId</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[ERROR] waspy.waitProcess: Passed empty, expected a process ID&#39;</span> <span class="o">+</span>
              <span class="s1">&#39;  ******************************************************************************&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;ERROR&quot;</span>

    <span class="n">sStatus</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">while</span> <span class="n">sStatus</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;DONE&quot;</span><span class="p">,</span> <span class="s2">&quot;STOPPED&quot;</span><span class="p">,</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">}:</span>
        <span class="n">sStatus</span> <span class="o">=</span> <span class="n">getProcessStatus</span><span class="p">(</span><span class="n">sProcessId</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">sStatus</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="wasdi.wasdiLog">
    <p>def <span class="ident">wasdiLog</span>(</p><p>sLogRow)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-wasdi.wasdiLog', this);">Show source &equiv;</a></p>
  <div id="source-wasdi.wasdiLog" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">wasdiLog</span><span class="p">(</span><span class="n">sLogRow</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">m_sBaseUrl</span>
    <span class="k">global</span> <span class="n">m_sSessionId</span>
    <span class="k">global</span> <span class="n">m_sActiveWorkspace</span>

    <span class="k">if</span> <span class="n">m_bIsOnServer</span><span class="p">:</span>
        <span class="n">asHeaders</span> <span class="o">=</span> <span class="n">_getStandardHeaders</span><span class="p">()</span>
        <span class="n">sUrl</span> <span class="o">=</span> <span class="n">m_sBaseUrl</span> <span class="o">+</span> <span class="s1">&#39;/processors/logs/add?processworkspace=&#39;</span> <span class="o">+</span> <span class="n">m_sMyProcId</span>
        <span class="n">oResult</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">sUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">sLogRow</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">asHeaders</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">oResult</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[WARNING] waspy.wasdiLog: could not log&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">oResult</span><span class="o">.</span><span class="n">ok</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;[WARNING] waspy.wasdiLog: could not log, server returned: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">oResult</span><span class="o">.</span><span class="n">status_code</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_log</span><span class="p">(</span><span class="n">sLogRow</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  


  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
